{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useAlert}from'../../hooks/useAlert';// Import useAlert hook\nimport{Card,CardContent,CardHeader,TextField,Button,Typography,Grid,Chip,Select,MenuItem,FormControl,InputLabel,Box,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,Paper,IconButton,Dialog,DialogTitle,DialogContent,DialogActions,Alert,Tab,Tabs,Badge,Tooltip,Avatar,List,ListItem,ListItemText,ListItemIcon,Accordion,AccordionSummary,AccordionDetails,CircularProgress}from'@mui/material';import{Timeline,TimelineItem,TimelineSeparator,TimelineConnector,TimelineContent,TimelineDot}from'@mui/lab';import{Search as SearchIcon,Group as GroupIcon,LocalHospital as HealthIcon,Medication as MedicationIcon,Vaccines as VaccinesIcon,Warning as WarningIcon,ExpandMore as ExpandMoreIcon,Visibility as VisibilityIcon,Edit as EditIcon,Assignment as AssignmentIcon,BarChart as BarChartIcon,Phone as PhoneIcon}from'@mui/icons-material';import PageHeader from'../../components/PageHeader';import'./StudentManagement.css';import{getAllStudents,getHealthDeclarationByStudentCode,getAllStudentsWithHealthData,nurseEditHealthDeclaration,getMedicalEventsByStudent}from'../../utils/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function StudentManagement(){const{successAlert,errorAlert}=useAlert();// Initialize useAlert hook\nconst[activeTab,setActiveTab]=useState(0);const[profileDialogOpen,setProfileDialogOpen]=useState(false);const[students,setStudents]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[searchTerm,setSearchTerm]=useState('');const[filterGrade,setFilterGrade]=useState('all');const[filterHealthStatus,setFilterHealthStatus]=useState('all');const[healthProfile,setHealthProfile]=useState(null);const[editDialogOpen,setEditDialogOpen]=useState(false);const[editingProfile,setEditingProfile]=useState(null);const[isSubmittingEdit,setIsSubmittingEdit]=useState(false);useEffect(()=>{fetchStudents();},[]);const fetchStudents=async()=>{setLoading(true);setError(null);try{// Use our getAllStudentsWithHealthData function which already maps and combines the data\nconst studentsWithHealthData=await getAllStudentsWithHealthData();// Map the returned data to the format expected by the UI\nconst formattedStudents=studentsWithHealthData.map(student=>{// Extract health data\nconst healthData=student.healthData||{};// Debug logging\nif(student.studentCode==='STU001'){}return{id:student.studentCode,name:student.fullName,grade:student.className||'N/A',dateOfBirth:student.dateOfBirth||'N/A',gender:student.gender||'N/A',studentCode:student.studentCode,email:student.userUsername||'N/A',phone:'N/A',// Not available in student data\naddress:'N/A',// Not available in student data\n// Health status based on health declaration\nhealthStatus:healthData.status?healthData.status==='APPROVED'?'normal':healthData.status==='PENDING'?'attention':healthData.status==='REJECTED'?'critical':'normal':'normal',// Health declaration details\nallergies:healthData.allergies?Array.isArray(healthData.allergies)?healthData.allergies.filter(item=>item&&item.trim()!==''):typeof healthData.allergies==='string'?healthData.allergies.split(',').filter(item=>item.trim()!==''):[]:[],medications:healthData.medications?Array.isArray(healthData.medications)?healthData.medications.map(med=>typeof med==='string'?med:med.medicationName||med.name||String(med)):typeof healthData.medications==='string'?healthData.medications.split(',').filter(item=>item.trim()!==''):[]:[],chronicIllnesses:healthData.chronicIllnesses?Array.isArray(healthData.chronicIllnesses)?healthData.chronicIllnesses.filter(item=>item&&item.trim()!==''):typeof healthData.chronicIllnesses==='string'?healthData.chronicIllnesses.split(',').filter(item=>item.trim()!==''):[]:[],healthConditions:healthData.chronicIllnesses?Array.isArray(healthData.chronicIllnesses)?healthData.chronicIllnesses.filter(item=>item&&item.trim()!==''):typeof healthData.chronicIllnesses==='string'?healthData.chronicIllnesses.split(',').filter(item=>item.trim()!==''):[]:[],emergencyContacts:healthData.emergencyContacts?healthData.emergencyContacts:healthData.emergencyContactName?[{name:healthData.emergencyContactName,relationship:healthData.emergencyContactRelationship||'Contact',phone:healthData.emergencyContactPhone||'N/A'}]:[],// Other health-related info\nlastCheckup:healthData.lastModifiedDate||'N/A',nextCheckup:'Scheduled based on school policy',vaccinationStatus:healthData.vaccinationStatus||'unknown',medicalEvents:student.medicalEvents||[],// Additional health declaration fields\nvisionStatus:healthData.visionStatus||'',hearingStatus:healthData.hearingStatus||'',medicalHistory:healthData.medicalHistory||'',specialNeeds:healthData.specialNeeds||'',physicalLimitations:healthData.physicalLimitations||'',mentalHealthConcerns:healthData.mentalHealthConcerns||'',dietaryRestrictions:healthData.dietaryRestrictions||'',vaccinations:healthData.vaccinations||[],restrictions:healthData.specialNeeds?[healthData.specialNeeds]:[]};});setStudents(formattedStudents);setLoading(false);}catch(error){console.error('Error fetching students:',error);setError('Failed to load student data. Please try again later.');setLoading(false);}};const handleViewProfile=student=>{setHealthProfile(student);setProfileDialogOpen(true);};const handleEditProfile=student=>{setEditingProfile({...student,allergies:student.allergies||[],chronicIllnesses:student.chronicIllnesses||[],emergencyContacts:student.emergencyContacts||[],visionStatus:student.visionStatus||'',hearingStatus:student.hearingStatus||'',specialNeeds:student.specialNeeds||'',physicalLimitations:student.physicalLimitations||'',mentalHealthConcerns:student.mentalHealthConcerns||'',dietaryRestrictions:student.dietaryRestrictions||'',medicalHistory:student.medicalHistory||''});setEditDialogOpen(true);};const handleSaveEdit=async()=>{if(!editingProfile)return;setIsSubmittingEdit(true);try{await nurseEditHealthDeclaration(editingProfile.studentCode,{allergies:editingProfile.allergies,chronicIllnesses:editingProfile.chronicIllnesses,emergencyContacts:editingProfile.emergencyContacts,visionStatus:editingProfile.visionStatus,hearingStatus:editingProfile.hearingStatus,specialNeeds:editingProfile.specialNeeds,physicalLimitations:editingProfile.physicalLimitations,mentalHealthConcerns:editingProfile.mentalHealthConcerns,dietaryRestrictions:editingProfile.dietaryRestrictions,medicalHistory:editingProfile.medicalHistory});successAlert('Health profile updated successfully!');setEditDialogOpen(false);setEditingProfile(null);fetchStudents();// Reload the student list\n}catch(error){console.error('Error updating health profile:',error);errorAlert('Error updating health profile: '+(error.message||'Unknown error'));}finally{setIsSubmittingEdit(false);}};const filteredStudents=students.filter(student=>{const matchesSearch=student.name.toLowerCase().includes(searchTerm.toLowerCase())||student.studentCode.toLowerCase().includes(searchTerm.toLowerCase());const matchesGrade=filterGrade==='all'||student.grade.includes(filterGrade);const matchesHealthStatus=filterHealthStatus==='all'||student.healthStatus===filterHealthStatus;return matchesSearch&&matchesGrade&&matchesHealthStatus;});const getHealthStatusColor=status=>{switch(status){case'normal':return'success';case'attention':return'warning';case'critical':return'error';default:return'default';}};const getVaccinationStatusColor=status=>{switch(status){case'up-to-date':return'success';case'pending':return'warning';case'overdue':return'error';default:return'default';}};const getHealthStatusIcon=status=>{switch(status){case'attention':return/*#__PURE__*/_jsx(WarningIcon,{});case'critical':return/*#__PURE__*/_jsx(WarningIcon,{});default:return/*#__PURE__*/_jsx(HealthIcon,{});}};const countByHealthStatus=status=>{return students.filter(student=>student.healthStatus===status).length;};const countByVaccinationStatus=status=>{return students.filter(student=>student.vaccinationStatus===status).length;};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(PageHeader,{title:\"Student Management\",subtitle:\"View and manage student health profiles and medical information\",icon:/*#__PURE__*/_jsx(GroupIcon,{})}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,className:\"mb-6\",children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{className:\"text-center\",children:[/*#__PURE__*/_jsx(GroupIcon,{className:\"text-4xl text-blue-500 mb-2\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:students.length}),/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",children:\"Total Students\"})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{className:\"text-center\",children:[/*#__PURE__*/_jsx(HealthIcon,{className:\"text-4xl text-green-500 mb-2\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:countByHealthStatus('normal')}),/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",children:\"Normal Health\"})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{className:\"text-center\",children:[/*#__PURE__*/_jsx(WarningIcon,{className:\"text-4xl text-orange-500 mb-2\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:countByHealthStatus('attention')}),/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",children:\"Need Attention\"})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{className:\"text-center\",children:[/*#__PURE__*/_jsx(VaccinesIcon,{className:\"text-4xl text-purple-500 mb-2\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:countByVaccinationStatus('up-to-date')}),/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",children:\"Vaccinations Current\"})]})})})]}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsxs(Tabs,{value:activeTab,onChange:(e,newValue)=>setActiveTab(newValue),children:[/*#__PURE__*/_jsx(Tab,{label:\"Student Directory\"}),/*#__PURE__*/_jsx(Tab,{label:\"Health Alerts\"}),/*#__PURE__*/_jsx(Tab,{label:\"Reports\"})]})}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{className:\"flex gap-4 mb-4\",children:[/*#__PURE__*/_jsx(TextField,{placeholder:\"Search students...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),InputProps:{startAdornment:/*#__PURE__*/_jsx(SearchIcon,{className:\"mr-2 text-gray-500\"})},className:\"flex-1\",disabled:loading}),/*#__PURE__*/_jsxs(FormControl,{className:\"min-w-32\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Grade\"}),/*#__PURE__*/_jsxs(Select,{value:filterGrade,label:\"Grade\",onChange:e=>setFilterGrade(e.target.value),disabled:loading,children:[/*#__PURE__*/_jsx(MenuItem,{value:\"all\",children:\"All\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"9\",children:\"Grade 9\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"10\",children:\"Grade 10\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"11\",children:\"Grade 11\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"12\",children:\"Grade 12\"})]})]}),/*#__PURE__*/_jsxs(FormControl,{className:\"min-w-40\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Health Status\"}),/*#__PURE__*/_jsxs(Select,{value:filterHealthStatus,label:\"Health Status\",onChange:e=>setFilterHealthStatus(e.target.value),disabled:loading,children:[/*#__PURE__*/_jsx(MenuItem,{value:\"all\",children:\"All\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"normal\",children:\"Normal\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"attention\",children:\"Need Attention\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"critical\",children:\"Critical\"})]})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:fetchStudents,disabled:loading,startIcon:loading?/*#__PURE__*/_jsx(CircularProgress,{size:20}):/*#__PURE__*/_jsx(HealthIcon,{}),children:loading?'Loading...':'Refresh'})]}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mt:2,mb:2},children:error}),activeTab===0&&/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Student\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Grade\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Health Status\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:loading?/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsxs(TableCell,{colSpan:4,align:\"center\",children:[/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',p:3},children:/*#__PURE__*/_jsx(CircularProgress,{})}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",align:\"center\",children:\"Loading student health data...\"})]})}):filteredStudents.length===0?/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{colSpan:4,align:\"center\",children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"No students found matching your criteria.\"})})}):filteredStudents.map(student=>/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(Box,{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(Avatar,{children:student.name.charAt(0)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",children:student.name}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",color:\"textSecondary\",children:[\"ID: \",student.studentCode]})]})]})}),/*#__PURE__*/_jsx(TableCell,{children:student.grade}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Chip,{icon:getHealthStatusIcon(student.healthStatus),label:student.healthStatus,color:getHealthStatusColor(student.healthStatus),size:\"small\"})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Tooltip,{title:\"View Profile\",children:/*#__PURE__*/_jsx(IconButton,{onClick:()=>handleViewProfile(student),children:/*#__PURE__*/_jsx(VisibilityIcon,{})})})})]},student.id))})]})}),activeTab===1&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Alert,{severity:\"warning\",className:\"mb-4\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Health Alerts\"}),/*#__PURE__*/_jsxs(Typography,{children:[countByHealthStatus('attention'),\" students require attention, \",countByVaccinationStatus('pending'),\" have pending vaccinations\"]})]}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{title:\"Students Requiring Attention\"}),/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsx(List,{children:students.filter(s=>s.healthStatus==='attention').map(student=>/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(WarningIcon,{color:\"warning\"})}),/*#__PURE__*/_jsx(ListItemText,{primary:student.name,secondary:`${student.grade} - ${student.healthConditions.join(', ')}`})]},student.id))})})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{title:\"Vaccination Pending\"}),/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsx(List,{children:students.filter(s=>s.vaccinationStatus==='pending').map(student=>/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(VaccinesIcon,{color:\"warning\"})}),/*#__PURE__*/_jsx(ListItemText,{primary:student.name,secondary:`${student.grade} - Vaccination due`})]},student.id))})})]})})]})]}),activeTab===2&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(BarChartIcon,{className:\"text-6xl text-gray-400 mb-4\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"textSecondary\",children:\"Student Health Reports\"}),/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",className:\"mb-4\",children:\"Generate comprehensive reports on student health statistics, trends, and compliance.\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(AssignmentIcon,{}),children:\"Generate Report\"})]})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:profileDialogOpen,onClose:()=>setProfileDialogOpen(false),maxWidth:\"lg\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:healthProfile&&/*#__PURE__*/_jsxs(Box,{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(Avatar,{className:\"w-12 h-12\",children:healthProfile.name.charAt(0)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:healthProfile.name}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",color:\"textSecondary\",children:[healthProfile.grade,\" - ID: \",healthProfile.studentCode]})]})]})}),/*#__PURE__*/_jsx(DialogContent,{children:healthProfile&&/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{title:\"Basic Information\"}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date of Birth:\"}),\" \",new Date(healthProfile.dateOfBirth).toLocaleDateString()]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Gender:\"}),\" \",healthProfile.gender]}),healthProfile.email&&healthProfile.email!=='N/A'&&/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",healthProfile.email]}),healthProfile.phone&&healthProfile.phone!=='N/A'&&/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Phone:\"}),\" \",healthProfile.phone]}),healthProfile.address&&healthProfile.address!=='N/A'&&/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Address:\"}),\" \",healthProfile.address]})]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{title:\"Health Status\"}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",className:\"mb-1\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Overall Status:\"})}),/*#__PURE__*/_jsx(Chip,{icon:getHealthStatusIcon(healthProfile.healthStatus),label:healthProfile.healthStatus,color:getHealthStatusColor(healthProfile.healthStatus)})]}),healthProfile.lastCheckup&&healthProfile.lastCheckup!=='Invalid Date'&&!isNaN(new Date(healthProfile.lastCheckup))&&/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Last Checkup:\"}),\" \",new Date(healthProfile.lastCheckup).toLocaleDateString()]}),healthProfile.nextCheckup&&healthProfile.nextCheckup!=='Invalid Date'&&!isNaN(new Date(healthProfile.nextCheckup))&&/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Next Checkup:\"}),\" \",new Date(healthProfile.nextCheckup).toLocaleDateString()]})]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{title:\"Health Conditions & Allergies\"}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Accordion,{children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(ExpandMoreIcon,{}),children:/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle2\",children:[\"Health Conditions (\",healthProfile.healthConditions?healthProfile.healthConditions.length:0,\")\"]})}),/*#__PURE__*/_jsxs(AccordionDetails,{children:[console.log('Current healthProfile healthConditions:',healthProfile.healthConditions),healthProfile.healthConditions&&healthProfile.healthConditions.length>0?/*#__PURE__*/_jsx(Box,{children:healthProfile.healthConditions.map((condition,index)=>/*#__PURE__*/_jsx(Chip,{label:String(condition),className:\"mr-1 mb-1\"},index))}):/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",children:[\"No health conditions reported (Data: \",JSON.stringify(healthProfile.healthConditions),\")\"]})]})]}),/*#__PURE__*/_jsxs(Accordion,{children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(ExpandMoreIcon,{}),children:/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle2\",children:[\"Allergies (\",healthProfile.allergies?healthProfile.allergies.length:0,\")\"]})}),/*#__PURE__*/_jsxs(AccordionDetails,{children:[console.log('Current healthProfile allergies:',healthProfile.allergies),console.log('Allergies type:',typeof healthProfile.allergies),console.log('Allergies is array:',Array.isArray(healthProfile.allergies)),healthProfile.allergies&&healthProfile.allergies.length>0?/*#__PURE__*/_jsxs(Box,{children:[console.log('Rendering allergies:',healthProfile.allergies),healthProfile.allergies.map((allergy,index)=>/*#__PURE__*/_jsx(Chip,{label:String(allergy),color:\"error\",className:\"mr-1 mb-1\"},index))]}):/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",children:[\"No allergies reported (Data: \",JSON.stringify(healthProfile.allergies),\")\"]})]})]}),/*#__PURE__*/_jsxs(Accordion,{children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(ExpandMoreIcon,{}),children:/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle2\",children:[\"Current Medications (\",healthProfile.medications?healthProfile.medications.length:0,\")\"]})}),/*#__PURE__*/_jsxs(AccordionDetails,{children:[console.log('Current healthProfile medications:',healthProfile.medications),healthProfile.medications&&healthProfile.medications.length>0?/*#__PURE__*/_jsx(Box,{children:healthProfile.medications.map((medication,index)=>/*#__PURE__*/_jsx(Chip,{label:String(medication),color:\"primary\",className:\"mr-1 mb-1\"},index))}):/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",children:[\"No current medications (Data: \",JSON.stringify(healthProfile.medications),\")\"]})]})]})]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{title:\"Vision & Hearing Status\"}),/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"textSecondary\",children:\"Vision Status\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:healthProfile.visionStatus||'Not specified'})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"textSecondary\",children:\"Hearing Status\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:healthProfile.hearingStatus||'Not specified'})]})]})})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{title:\"Medical History\"}),/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:healthProfile.medicalHistory||'No medical history provided'})})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{title:\"Other Health Information\"}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Accordion,{children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(ExpandMoreIcon,{}),children:/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",children:\"Special Needs or Accommodations\"})}),/*#__PURE__*/_jsx(AccordionDetails,{children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:healthProfile.specialNeeds||'None specified'})})]}),/*#__PURE__*/_jsxs(Accordion,{children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(ExpandMoreIcon,{}),children:/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",children:\"Physical Limitations or Activity Restrictions\"})}),/*#__PURE__*/_jsx(AccordionDetails,{children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:healthProfile.physicalLimitations||'None specified'})})]}),/*#__PURE__*/_jsxs(Accordion,{children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(ExpandMoreIcon,{}),children:/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",children:\"Mental or Emotional Health Concerns\"})}),/*#__PURE__*/_jsx(AccordionDetails,{children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:healthProfile.mentalHealthConcerns||'None specified'})})]}),/*#__PURE__*/_jsxs(Accordion,{children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(ExpandMoreIcon,{}),children:/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",children:\"Dietary Restrictions or Preferences\"})}),/*#__PURE__*/_jsx(AccordionDetails,{children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:healthProfile.dietaryRestrictions||'None specified'})})]})]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{title:\"Vaccination Records\"}),/*#__PURE__*/_jsx(CardContent,{children:healthProfile.vaccinations&&healthProfile.vaccinations.length>0?/*#__PURE__*/_jsx(TableContainer,{component:Paper,variant:\"outlined\",children:/*#__PURE__*/_jsxs(Table,{size:\"small\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{sx:{fontWeight:'bold'},children:\"Vaccine\"}),/*#__PURE__*/_jsx(TableCell,{sx:{fontWeight:'bold'},children:\"Date\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:healthProfile.vaccinations.map((vaccination,index)=>/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{sx:{py:1},children:vaccination.vaccineName}),/*#__PURE__*/_jsx(TableCell,{sx:{py:1},children:vaccination.vaccinationDate?new Date(vaccination.vaccinationDate).toLocaleDateString():'Date not available'})]},index))})]})}):/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"No vaccination records available\"})})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{title:\"Emergency Contacts\"}),/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsx(List,{children:healthProfile.emergencyContacts.map((contact,index)=>/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(PhoneIcon,{})}),/*#__PURE__*/_jsx(ListItemText,{primary:contact.name,secondary:`${contact.relationship} - ${contact.phone}`})]},index))})})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{title:\"Recent Medical Events\"}),/*#__PURE__*/_jsx(CardContent,{sx:{p:0},children:/*#__PURE__*/_jsx(Timeline,{sx:{'& .MuiTimelineItem-root':{'&:before':{flex:0,padding:0}},'& .MuiTimelineContent-root':{flex:1,px:2,py:1}},children:healthProfile.medicalEvents&&healthProfile.medicalEvents.length>0?healthProfile.medicalEvents.map((event,index)=>/*#__PURE__*/_jsxs(TimelineItem,{children:[/*#__PURE__*/_jsxs(TimelineSeparator,{children:[/*#__PURE__*/_jsx(TimelineDot,{color:event.severity==='LOW'?'success':event.severity==='MEDIUM'?'warning':event.severity==='HIGH'?'error':'primary'}),index<healthProfile.medicalEvents.length-1&&/*#__PURE__*/_jsx(TimelineConnector,{})]}),/*#__PURE__*/_jsx(TimelineContent,{sx:{flex:1,minWidth:0},children:/*#__PURE__*/_jsxs(Box,{sx:{backgroundColor:'background.paper',borderRadius:2,p:2,border:'1px solid',borderColor:'divider',boxShadow:1,width:'100%',maxWidth:'none'},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',mb:2,pb:1,borderBottom:'1px solid',borderColor:'divider'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",fontWeight:\"bold\",color:\"primary\",children:event.type||event.eventType||'INJURY'}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:event.date?new Date(event.date).toLocaleDateString():'Date not available'}),/*#__PURE__*/_jsx(Chip,{label:event.severity||'MEDIUM',size:\"small\",color:event.severity==='LOW'?'success':event.severity==='MEDIUM'?'warning':event.severity==='HIGH'?'error':'warning'})]})]}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,sx:{width:'100%'},children:[event.description&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Box,{sx:{backgroundColor:'grey.50',p:2,borderRadius:1,height:'100%'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",fontWeight:\"bold\",color:\"text.primary\",sx:{mb:1},children:\"Injury/Condition:\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:event.description})]})}),event.symptoms&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Box,{sx:{backgroundColor:'grey.50',p:2,borderRadius:1,height:'100%'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",fontWeight:\"bold\",color:\"text.primary\",sx:{mb:1},children:\"Symptoms:\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:event.symptoms})]})}),event.treatment&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Box,{sx:{backgroundColor:'blue.50',p:2,borderRadius:1},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",fontWeight:\"bold\",color:\"text.primary\",sx:{mb:1},children:\"Treatment Provided:\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:event.treatment})]})}),event.medicationsUsed&&event.medicationsUsed.length>0&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Box,{sx:{backgroundColor:'green.50',p:2,borderRadius:1},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",fontWeight:\"bold\",color:\"text.primary\",sx:{mb:1},children:\"Medications Used:\"}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexWrap:'wrap',gap:1},children:event.medicationsUsed.map((med,medIndex)=>/*#__PURE__*/_jsx(Chip,{label:`${med.name}${med.dosage?` - ${med.dosage}`:''}`,size:\"small\",color:\"success\",variant:\"outlined\",sx:{fontWeight:'medium'}},medIndex))})]})}),event.followUpRequired&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Box,{sx:{display:'flex',alignItems:'center',gap:1,backgroundColor:'warning.light',color:'warning.contrastText',p:2,borderRadius:1},children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",fontWeight:\"bold\",children:\"\\u26A0\\uFE0F Follow-up Required\"})})})]})]})})]},index)):/*#__PURE__*/_jsxs(TimelineItem,{children:[/*#__PURE__*/_jsx(TimelineSeparator,{children:/*#__PURE__*/_jsx(TimelineDot,{color:\"grey\"})}),/*#__PURE__*/_jsx(TimelineContent,{children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"No recent medical events recorded\"})})]})})})]})})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setProfileDialogOpen(false),children:\"Close\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(EditIcon,{}),onClick:()=>handleEditProfile(healthProfile),children:\"Edit Profile\"})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:editDialogOpen,onClose:()=>setEditDialogOpen(false),maxWidth:\"md\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Edit Health Profile\"}),/*#__PURE__*/_jsx(DialogContent,{children:editingProfile&&/*#__PURE__*/_jsx(Box,{sx:{mt:2},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",gutterBottom:true,children:[\"Student: \",editingProfile.name,\" (\",editingProfile.studentCode,\")\"]})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:\"Allergies\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,multiline:true,rows:3,value:Array.isArray(editingProfile.allergies)?editingProfile.allergies.join(', '):editingProfile.allergies||'',onChange:e=>setEditingProfile({...editingProfile,allergies:e.target.value.split(',').map(item=>item.trim()).filter(item=>item)}),placeholder:\"Enter allergies separated by commas\"})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:\"Chronic Illnesses\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,multiline:true,rows:3,value:Array.isArray(editingProfile.chronicIllnesses)?editingProfile.chronicIllnesses.join(', '):editingProfile.chronicIllnesses||'',onChange:e=>setEditingProfile({...editingProfile,chronicIllnesses:e.target.value.split(',').map(item=>item.trim()).filter(item=>item)}),placeholder:\"Enter chronic illnesses separated by commas\"})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:\"Vision Status\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,value:editingProfile.visionStatus||'',onChange:e=>setEditingProfile({...editingProfile,visionStatus:e.target.value}),placeholder:\"e.g., Wears glasses, 20/20\"})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:\"Hearing Status\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,value:editingProfile.hearingStatus||'',onChange:e=>setEditingProfile({...editingProfile,hearingStatus:e.target.value}),placeholder:\"e.g., Normal, Uses hearing aids\"})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:\"Special Needs\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,multiline:true,rows:2,value:editingProfile.specialNeeds||'',onChange:e=>setEditingProfile({...editingProfile,specialNeeds:e.target.value}),placeholder:\"Describe any special needs\"})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:\"Physical Limitations\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,multiline:true,rows:2,value:editingProfile.physicalLimitations||'',onChange:e=>setEditingProfile({...editingProfile,physicalLimitations:e.target.value}),placeholder:\"Describe any physical limitations\"})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:\"Mental Health Concerns\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,multiline:true,rows:2,value:editingProfile.mentalHealthConcerns||'',onChange:e=>setEditingProfile({...editingProfile,mentalHealthConcerns:e.target.value}),placeholder:\"Describe any mental health concerns\"})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:\"Dietary Restrictions\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,multiline:true,rows:2,value:editingProfile.dietaryRestrictions||'',onChange:e=>setEditingProfile({...editingProfile,dietaryRestrictions:e.target.value}),placeholder:\"e.g., Vegetarian, Gluten-free\"})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:\"Medical History\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,multiline:true,rows:3,value:editingProfile.medicalHistory||'',onChange:e=>setEditingProfile({...editingProfile,medicalHistory:e.target.value}),placeholder:\"Describe relevant medical history\"})]})]})})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setEditDialogOpen(false),disabled:isSubmittingEdit,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:handleSaveEdit,disabled:isSubmittingEdit,startIcon:isSubmittingEdit?/*#__PURE__*/_jsx(CircularProgress,{size:20}):null,children:isSubmittingEdit?'Saving...':'Save Changes'})]})]})]});}export default StudentManagement;","map":{"version":3,"names":["React","useState","useEffect","useAlert","Card","CardContent","CardHeader","TextField","Button","Typography","Grid","Chip","Select","MenuItem","FormControl","InputLabel","Box","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","IconButton","Dialog","DialogTitle","DialogContent","DialogActions","Alert","Tab","Tabs","Badge","Tooltip","Avatar","List","ListItem","ListItemText","ListItemIcon","Accordion","AccordionSummary","AccordionDetails","CircularProgress","Timeline","TimelineItem","TimelineSeparator","TimelineConnector","TimelineContent","TimelineDot","Search","SearchIcon","Group","GroupIcon","LocalHospital","HealthIcon","Medication","MedicationIcon","Vaccines","VaccinesIcon","Warning","WarningIcon","ExpandMore","ExpandMoreIcon","Visibility","VisibilityIcon","Edit","EditIcon","Assignment","AssignmentIcon","BarChart","BarChartIcon","Phone","PhoneIcon","PageHeader","getAllStudents","getHealthDeclarationByStudentCode","getAllStudentsWithHealthData","nurseEditHealthDeclaration","getMedicalEventsByStudent","jsx","_jsx","jsxs","_jsxs","StudentManagement","successAlert","errorAlert","activeTab","setActiveTab","profileDialogOpen","setProfileDialogOpen","students","setStudents","loading","setLoading","error","setError","searchTerm","setSearchTerm","filterGrade","setFilterGrade","filterHealthStatus","setFilterHealthStatus","healthProfile","setHealthProfile","editDialogOpen","setEditDialogOpen","editingProfile","setEditingProfile","isSubmittingEdit","setIsSubmittingEdit","fetchStudents","studentsWithHealthData","formattedStudents","map","student","healthData","studentCode","id","name","fullName","grade","className","dateOfBirth","gender","email","userUsername","phone","address","healthStatus","status","allergies","Array","isArray","filter","item","trim","split","medications","med","medicationName","String","chronicIllnesses","healthConditions","emergencyContacts","emergencyContactName","relationship","emergencyContactRelationship","emergencyContactPhone","lastCheckup","lastModifiedDate","nextCheckup","vaccinationStatus","medicalEvents","visionStatus","hearingStatus","medicalHistory","specialNeeds","physicalLimitations","mentalHealthConcerns","dietaryRestrictions","vaccinations","restrictions","console","handleViewProfile","handleEditProfile","handleSaveEdit","message","filteredStudents","matchesSearch","toLowerCase","includes","matchesGrade","matchesHealthStatus","getHealthStatusColor","getVaccinationStatusColor","getHealthStatusIcon","countByHealthStatus","length","countByVaccinationStatus","children","title","subtitle","icon","container","spacing","xs","md","variant","color","value","onChange","e","newValue","label","placeholder","target","InputProps","startAdornment","disabled","onClick","startIcon","size","severity","sx","mt","mb","component","colSpan","align","display","justifyContent","p","charAt","s","primary","secondary","join","open","onClose","maxWidth","fullWidth","Date","toLocaleDateString","isNaN","expandIcon","log","condition","index","JSON","stringify","allergy","medication","fontWeight","vaccination","py","vaccineName","vaccinationDate","contact","flex","padding","px","event","minWidth","backgroundColor","borderRadius","border","borderColor","boxShadow","width","alignItems","pb","borderBottom","type","eventType","gap","date","description","height","symptoms","treatment","medicationsUsed","flexWrap","medIndex","dosage","followUpRequired","gutterBottom","multiline","rows"],"sources":["C:/Users/trand/OneDrive/Documents/GitHub/SchoolMedicalManagement/frontend/src/pages/medical/StudentManagement.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useAlert } from '../../hooks/useAlert'; // Import useAlert hook\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardHeader,\r\n  TextField,\r\n  Button,\r\n  Typography,\r\n  Grid,\r\n  Chip,\r\n  Select,\r\n  MenuItem,\r\n  FormControl,\r\n  InputLabel,\r\n  Box,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Paper,\r\n  IconButton,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Alert,\r\n  Tab,\r\n  Tabs,\r\n  Badge,\r\n  Tooltip,\r\n  Avatar,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemIcon,\r\n  Accordion,\r\n  AccordionSummary,\r\n  AccordionDetails,\r\n  CircularProgress\r\n} from '@mui/material';\r\nimport {\r\n  Timeline,\r\n  TimelineItem,\r\n  TimelineSeparator,\r\n  TimelineConnector,\r\n  TimelineContent,\r\n  TimelineDot\r\n} from '@mui/lab';\r\nimport {\r\n  Search as SearchIcon,\r\n  Group as GroupIcon,\r\n  LocalHospital as HealthIcon,\r\n  Medication as MedicationIcon,\r\n  Vaccines as VaccinesIcon,\r\n  Warning as WarningIcon,\r\n  ExpandMore as ExpandMoreIcon,\r\n  Visibility as VisibilityIcon,\r\n  Edit as EditIcon,\r\n  Assignment as AssignmentIcon,\r\n  BarChart as BarChartIcon,\r\n  Phone as PhoneIcon\r\n} from '@mui/icons-material';\r\nimport PageHeader from '../../components/PageHeader';\r\nimport './StudentManagement.css';\r\nimport { getAllStudents, getHealthDeclarationByStudentCode, getAllStudentsWithHealthData, nurseEditHealthDeclaration, getMedicalEventsByStudent } from '../../utils/api';\r\n\r\nfunction StudentManagement() {\r\n  const { successAlert, errorAlert } = useAlert(); // Initialize useAlert hook\r\n  const [activeTab, setActiveTab] = useState(0);\r\n  const [profileDialogOpen, setProfileDialogOpen] = useState(false);\r\n  const [students, setStudents] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filterGrade, setFilterGrade] = useState('all');\r\n  const [filterHealthStatus, setFilterHealthStatus] = useState('all');\r\n  const [healthProfile, setHealthProfile] = useState(null);\r\n  const [editDialogOpen, setEditDialogOpen] = useState(false);\r\n  const [editingProfile, setEditingProfile] = useState(null);\r\n  const [isSubmittingEdit, setIsSubmittingEdit] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchStudents();\r\n  }, []);\r\n\r\n  const fetchStudents = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      // Use our getAllStudentsWithHealthData function which already maps and combines the data\r\n      const studentsWithHealthData = await getAllStudentsWithHealthData();\r\n      \r\n      // Map the returned data to the format expected by the UI\r\n      const formattedStudents = studentsWithHealthData.map(student => {\r\n        // Extract health data\r\n        const healthData = student.healthData || {};\r\n        \r\n        // Debug logging\r\n        if (student.studentCode === 'STU001') {\r\n          }\r\n        \r\n        return {\r\n          id: student.studentCode,\r\n          name: student.fullName,\r\n          grade: student.className || 'N/A',\r\n          dateOfBirth: student.dateOfBirth || 'N/A',\r\n          gender: student.gender || 'N/A',\r\n          studentCode: student.studentCode,\r\n          email: student.userUsername || 'N/A',\r\n          phone: 'N/A', // Not available in student data\r\n          address: 'N/A', // Not available in student data\r\n          \r\n          // Health status based on health declaration\r\n          healthStatus: healthData.status ? \r\n            (healthData.status === 'APPROVED' ? 'normal' : \r\n             healthData.status === 'PENDING' ? 'attention' : \r\n             healthData.status === 'REJECTED' ? 'critical' : 'normal') : 'normal',\r\n          \r\n          // Health declaration details\r\n          allergies: healthData.allergies ? \r\n            (Array.isArray(healthData.allergies) ? \r\n              healthData.allergies.filter(item => item && item.trim() !== '') : \r\n              (typeof healthData.allergies === 'string' ? \r\n                healthData.allergies.split(',').filter(item => item.trim() !== '') : [])) : [],\r\n          medications: healthData.medications ? \r\n            (Array.isArray(healthData.medications) ?\r\n              healthData.medications.map(med => \r\n                typeof med === 'string' ? med : (med.medicationName || med.name || String(med))\r\n              ) : \r\n              (typeof healthData.medications === 'string' ?\r\n                healthData.medications.split(',').filter(item => item.trim() !== '') : [])) : [],\r\n          chronicIllnesses: healthData.chronicIllnesses ? \r\n            (Array.isArray(healthData.chronicIllnesses) ? \r\n              healthData.chronicIllnesses.filter(item => item && item.trim() !== '') : \r\n              (typeof healthData.chronicIllnesses === 'string' ? \r\n                healthData.chronicIllnesses.split(',').filter(item => item.trim() !== '') : [])) : [],\r\n          healthConditions: healthData.chronicIllnesses ? \r\n            (Array.isArray(healthData.chronicIllnesses) ? \r\n              healthData.chronicIllnesses.filter(item => item && item.trim() !== '') : \r\n              (typeof healthData.chronicIllnesses === 'string' ? \r\n                healthData.chronicIllnesses.split(',').filter(item => item.trim() !== '') : [])) : [],\r\n          emergencyContacts: healthData.emergencyContacts ? \r\n            healthData.emergencyContacts : \r\n            (healthData.emergencyContactName ? [{ \r\n              name: healthData.emergencyContactName, \r\n              relationship: healthData.emergencyContactRelationship || 'Contact', \r\n              phone: healthData.emergencyContactPhone || 'N/A' \r\n            }] : []),\r\n          \r\n          // Other health-related info\r\n          lastCheckup: healthData.lastModifiedDate || 'N/A',\r\n          nextCheckup: 'Scheduled based on school policy',\r\n          vaccinationStatus: healthData.vaccinationStatus || 'unknown',\r\n          medicalEvents: student.medicalEvents || [],\r\n          \r\n          // Additional health declaration fields\r\n          visionStatus: healthData.visionStatus || '',\r\n          hearingStatus: healthData.hearingStatus || '',\r\n          medicalHistory: healthData.medicalHistory || '',\r\n          specialNeeds: healthData.specialNeeds || '',\r\n          physicalLimitations: healthData.physicalLimitations || '',\r\n          mentalHealthConcerns: healthData.mentalHealthConcerns || '',\r\n          dietaryRestrictions: healthData.dietaryRestrictions || '',\r\n          vaccinations: healthData.vaccinations || [],\r\n          \r\n          restrictions: healthData.specialNeeds ? \r\n            [healthData.specialNeeds] : []\r\n        };\r\n      });\r\n      \r\n      setStudents(formattedStudents);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.error('Error fetching students:', error);\r\n      setError('Failed to load student data. Please try again later.');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleViewProfile = (student) => {\r\n    setHealthProfile(student);\r\n    setProfileDialogOpen(true);\r\n  };\r\n\r\n  const handleEditProfile = (student) => {\r\n    setEditingProfile({\r\n      ...student,\r\n      allergies: student.allergies || [],\r\n      chronicIllnesses: student.chronicIllnesses || [],\r\n      emergencyContacts: student.emergencyContacts || [],\r\n      visionStatus: student.visionStatus || '',\r\n      hearingStatus: student.hearingStatus || '',\r\n      specialNeeds: student.specialNeeds || '',\r\n      physicalLimitations: student.physicalLimitations || '',\r\n      mentalHealthConcerns: student.mentalHealthConcerns || '',\r\n      dietaryRestrictions: student.dietaryRestrictions || '',\r\n      medicalHistory: student.medicalHistory || ''\r\n    });\r\n    setEditDialogOpen(true);\r\n  };\r\n\r\n  const handleSaveEdit = async () => {\r\n    if (!editingProfile) return;\r\n\r\n    setIsSubmittingEdit(true);\r\n    try {\r\n      await nurseEditHealthDeclaration(editingProfile.studentCode, {\r\n        allergies: editingProfile.allergies,\r\n        chronicIllnesses: editingProfile.chronicIllnesses,\r\n        emergencyContacts: editingProfile.emergencyContacts,\r\n        visionStatus: editingProfile.visionStatus,\r\n        hearingStatus: editingProfile.hearingStatus,\r\n        specialNeeds: editingProfile.specialNeeds,\r\n        physicalLimitations: editingProfile.physicalLimitations,\r\n        mentalHealthConcerns: editingProfile.mentalHealthConcerns,\r\n        dietaryRestrictions: editingProfile.dietaryRestrictions,\r\n        medicalHistory: editingProfile.medicalHistory\r\n      });\r\n\r\n      successAlert('Health profile updated successfully!');\r\n      setEditDialogOpen(false);\r\n      setEditingProfile(null);\r\n      fetchStudents(); // Reload the student list\r\n    } catch (error) {\r\n      console.error('Error updating health profile:', error);\r\n      errorAlert('Error updating health profile: ' + (error.message || 'Unknown error'));\r\n    } finally {\r\n      setIsSubmittingEdit(false);\r\n    }\r\n  };\r\n\r\n  const filteredStudents = students.filter(student => {\r\n    const matchesSearch = student.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                         student.studentCode.toLowerCase().includes(searchTerm.toLowerCase());\r\n    const matchesGrade = filterGrade === 'all' || student.grade.includes(filterGrade);\r\n    const matchesHealthStatus = filterHealthStatus === 'all' || student.healthStatus === filterHealthStatus;\r\n    return matchesSearch && matchesGrade && matchesHealthStatus;\r\n  });\r\n\r\n  const getHealthStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'normal': return 'success';\r\n      case 'attention': return 'warning';\r\n      case 'critical': return 'error';\r\n      default: return 'default';\r\n    }\r\n  };\r\n\r\n  const getVaccinationStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'up-to-date': return 'success';\r\n      case 'pending': return 'warning';\r\n      case 'overdue': return 'error';\r\n      default: return 'default';\r\n    }\r\n  };\r\n\r\n  const getHealthStatusIcon = (status) => {\r\n    switch (status) {\r\n      case 'attention': return <WarningIcon />;\r\n      case 'critical': return <WarningIcon />;\r\n      default: return <HealthIcon />;\r\n    }\r\n  };\r\n\r\n  const countByHealthStatus = (status) => {\r\n    return students.filter(student => student.healthStatus === status).length;\r\n  };\r\n\r\n  const countByVaccinationStatus = (status) => {\r\n    return students.filter(student => student.vaccinationStatus === status).length;\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <PageHeader\r\n        title=\"Student Management\"\r\n        subtitle=\"View and manage student health profiles and medical information\"\r\n        icon={<GroupIcon />}\r\n      />\r\n\r\n      {/* Statistics Cards */}\r\n      <Grid container spacing={3} className=\"mb-6\">\r\n        <Grid item xs={12} md={3}>\r\n          <Card>\r\n            <CardContent className=\"text-center\">\r\n              <GroupIcon className=\"text-4xl text-blue-500 mb-2\" />\r\n              <Typography variant=\"h4\">{students.length}</Typography>\r\n              <Typography color=\"textSecondary\">Total Students</Typography>\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n        <Grid item xs={12} md={3}>\r\n          <Card>\r\n            <CardContent className=\"text-center\">\r\n              <HealthIcon className=\"text-4xl text-green-500 mb-2\" />\r\n              <Typography variant=\"h4\">{countByHealthStatus('normal')}</Typography>\r\n              <Typography color=\"textSecondary\">Normal Health</Typography>\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n        <Grid item xs={12} md={3}>\r\n          <Card>\r\n            <CardContent className=\"text-center\">\r\n              <WarningIcon className=\"text-4xl text-orange-500 mb-2\" />\r\n              <Typography variant=\"h4\">{countByHealthStatus('attention')}</Typography>\r\n              <Typography color=\"textSecondary\">Need Attention</Typography>\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n        <Grid item xs={12} md={3}>\r\n          <Card>\r\n            <CardContent className=\"text-center\">\r\n              <VaccinesIcon className=\"text-4xl text-purple-500 mb-2\" />\r\n              <Typography variant=\"h4\">{countByVaccinationStatus('up-to-date')}</Typography>\r\n              <Typography color=\"textSecondary\">Vaccinations Current</Typography>\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n      </Grid>\r\n\r\n      {/* Main Content */}\r\n      <Card>\r\n        <CardHeader>\r\n          <Tabs value={activeTab} onChange={(e, newValue) => setActiveTab(newValue)}>\r\n            <Tab label=\"Student Directory\" />\r\n            <Tab label=\"Health Alerts\" />\r\n            <Tab label=\"Reports\" />\r\n          </Tabs>\r\n        </CardHeader>\r\n        <CardContent>\r\n          {/* Search and Filter */}\r\n          <Box className=\"flex gap-4 mb-4\">\r\n            <TextField\r\n              placeholder=\"Search students...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              InputProps={{\r\n                startAdornment: <SearchIcon className=\"mr-2 text-gray-500\" />\r\n              }}\r\n              className=\"flex-1\"\r\n              disabled={loading}\r\n            />\r\n            <FormControl className=\"min-w-32\">\r\n              <InputLabel>Grade</InputLabel>\r\n              <Select\r\n                value={filterGrade}\r\n                label=\"Grade\"\r\n                onChange={(e) => setFilterGrade(e.target.value)}\r\n                disabled={loading}\r\n              >\r\n                <MenuItem value=\"all\">All</MenuItem>\r\n                <MenuItem value=\"9\">Grade 9</MenuItem>\r\n                <MenuItem value=\"10\">Grade 10</MenuItem>\r\n                <MenuItem value=\"11\">Grade 11</MenuItem>\r\n                <MenuItem value=\"12\">Grade 12</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n            <FormControl className=\"min-w-40\">\r\n              <InputLabel>Health Status</InputLabel>\r\n              <Select\r\n                value={filterHealthStatus}\r\n                label=\"Health Status\"\r\n                onChange={(e) => setFilterHealthStatus(e.target.value)}\r\n                disabled={loading}\r\n              >\r\n                <MenuItem value=\"all\">All</MenuItem>\r\n                <MenuItem value=\"normal\">Normal</MenuItem>\r\n                <MenuItem value=\"attention\">Need Attention</MenuItem>\r\n                <MenuItem value=\"critical\">Critical</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={fetchStudents}\r\n              disabled={loading}\r\n              startIcon={loading ? <CircularProgress size={20} /> : <HealthIcon />}\r\n            >\r\n              {loading ? 'Loading...' : 'Refresh'}\r\n            </Button>\r\n          </Box>\r\n          \r\n          {/* Error message */}\r\n          {error && (\r\n            <Alert severity=\"error\" sx={{ mt: 2, mb: 2 }}>\r\n              {error}\r\n            </Alert>\r\n          )}\r\n\r\n          {/* Tab Content */}\r\n          {activeTab === 0 && (\r\n            <TableContainer component={Paper}>\r\n              <Table>\r\n                <TableHead>\r\n                  <TableRow>\r\n                    <TableCell>Student</TableCell>\r\n                    <TableCell>Grade</TableCell>\r\n                    <TableCell>Health Status</TableCell>\r\n                    <TableCell>Actions</TableCell>\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  {loading ? (\r\n                    <TableRow>\r\n                      <TableCell colSpan={4} align=\"center\">\r\n                        <Box sx={{ display: 'flex', justifyContent: 'center', p: 3 }}>\r\n                          <CircularProgress />\r\n                        </Box>\r\n                        <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n                          Loading student health data...\r\n                        </Typography>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ) : filteredStudents.length === 0 ? (\r\n                    <TableRow>\r\n                      <TableCell colSpan={4} align=\"center\">\r\n                        <Typography variant=\"body2\" color=\"textSecondary\">\r\n                          No students found matching your criteria.\r\n                        </Typography>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ) : (\r\n                    filteredStudents.map((student) => (\r\n                    <TableRow key={student.id}>\r\n                      <TableCell>\r\n                        <Box className=\"flex items-center gap-3\">\r\n                          <Avatar>{student.name.charAt(0)}</Avatar>\r\n                          <div>\r\n                            <Typography variant=\"subtitle2\">{student.name}</Typography>\r\n                            <Typography variant=\"caption\" color=\"textSecondary\">\r\n                              ID: {student.studentCode}\r\n                            </Typography>\r\n                          </div>\r\n                        </Box>\r\n                      </TableCell>\r\n                      <TableCell>{student.grade}</TableCell>\r\n                      <TableCell>\r\n                        <Chip\r\n                          icon={getHealthStatusIcon(student.healthStatus)}\r\n                          label={student.healthStatus}\r\n                          color={getHealthStatusColor(student.healthStatus)}\r\n                          size=\"small\"\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <Tooltip title=\"View Profile\">\r\n                          <IconButton onClick={() => handleViewProfile(student)}>\r\n                            <VisibilityIcon />\r\n                          </IconButton>\r\n                        </Tooltip>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))\r\n                  )}\r\n                </TableBody>\r\n              </Table>\r\n            </TableContainer>\r\n          )}\r\n\r\n          {activeTab === 1 && (\r\n            <div>\r\n              <Alert severity=\"warning\" className=\"mb-4\">\r\n                <Typography variant=\"h6\">Health Alerts</Typography>\r\n                <Typography>\r\n                  {countByHealthStatus('attention')} students require attention, {countByVaccinationStatus('pending')} have pending vaccinations\r\n                </Typography>\r\n              </Alert>\r\n\r\n              <Grid container spacing={3}>\r\n                <Grid item xs={12} md={6}>\r\n                  <Card>\r\n                    <CardHeader title=\"Students Requiring Attention\" />\r\n                    <CardContent>\r\n                      <List>\r\n                        {students.filter(s => s.healthStatus === 'attention').map((student) => (\r\n                          <ListItem key={student.id}>\r\n                            <ListItemIcon>\r\n                              <WarningIcon color=\"warning\" />\r\n                            </ListItemIcon>\r\n                            <ListItemText\r\n                              primary={student.name}\r\n                              secondary={`${student.grade} - ${student.healthConditions.join(', ')}`}\r\n                            />\r\n                          </ListItem>\r\n                        ))}\r\n                      </List>\r\n                    </CardContent>\r\n                  </Card>\r\n                </Grid>\r\n\r\n                <Grid item xs={12} md={6}>\r\n                  <Card>\r\n                    <CardHeader title=\"Vaccination Pending\" />\r\n                    <CardContent>\r\n                      <List>\r\n                        {students.filter(s => s.vaccinationStatus === 'pending').map((student) => (\r\n                          <ListItem key={student.id}>\r\n                            <ListItemIcon>\r\n                              <VaccinesIcon color=\"warning\" />\r\n                            </ListItemIcon>\r\n                            <ListItemText\r\n                              primary={student.name}\r\n                              secondary={`${student.grade} - Vaccination due`}\r\n                            />\r\n                          </ListItem>\r\n                        ))}\r\n                      </List>\r\n                    </CardContent>\r\n                  </Card>\r\n                </Grid>\r\n              </Grid>\r\n            </div>\r\n          )}\r\n\r\n          {activeTab === 2 && (\r\n            <div className=\"text-center py-8\">\r\n              <BarChartIcon className=\"text-6xl text-gray-400 mb-4\" />\r\n              <Typography variant=\"h6\" color=\"textSecondary\">\r\n                Student Health Reports\r\n              </Typography>\r\n              <Typography color=\"textSecondary\" className=\"mb-4\">\r\n                Generate comprehensive reports on student health statistics, trends, and compliance.\r\n              </Typography>\r\n              <Button variant=\"outlined\" startIcon={<AssignmentIcon />}>\r\n                Generate Report\r\n              </Button>\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Student Profile Dialog */}\r\n      <Dialog open={profileDialogOpen} onClose={() => setProfileDialogOpen(false)} maxWidth=\"lg\" fullWidth>\r\n        <DialogTitle>\r\n          {healthProfile && (\r\n            <Box className=\"flex items-center gap-3\">\r\n              <Avatar className=\"w-12 h-12\">{healthProfile.name.charAt(0)}</Avatar>\r\n              <div>\r\n                <Typography variant=\"h6\">{healthProfile.name}</Typography>\r\n                <Typography variant=\"caption\" color=\"textSecondary\">\r\n                  {healthProfile.grade} - ID: {healthProfile.studentCode}\r\n                </Typography>\r\n              </div>\r\n            </Box>\r\n          )}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          {healthProfile && (\r\n            <Grid container spacing={3}>\r\n              {/* Basic Information */}\r\n              <Grid item xs={12} md={6}>\r\n                <Card>\r\n                  <CardHeader title=\"Basic Information\" />\r\n                  <CardContent>\r\n                    <Typography variant=\"body2\" className=\"mb-2\">\r\n                      <strong>Date of Birth:</strong> {new Date(healthProfile.dateOfBirth).toLocaleDateString()}\r\n                    </Typography>\r\n                    <Typography variant=\"body2\" className=\"mb-2\">\r\n                      <strong>Gender:</strong> {healthProfile.gender}\r\n                    </Typography>\r\n                    {healthProfile.email && healthProfile.email !== 'N/A' && (\r\n                      <Typography variant=\"body2\" className=\"mb-2\">\r\n                        <strong>Email:</strong> {healthProfile.email}\r\n                      </Typography>\r\n                    )}\r\n                    {healthProfile.phone && healthProfile.phone !== 'N/A' && (\r\n                      <Typography variant=\"body2\" className=\"mb-2\">\r\n                        <strong>Phone:</strong> {healthProfile.phone}\r\n                      </Typography>\r\n                    )}\r\n                    {healthProfile.address && healthProfile.address !== 'N/A' && (\r\n                      <Typography variant=\"body2\">\r\n                        <strong>Address:</strong> {healthProfile.address}\r\n                      </Typography>\r\n                    )}\r\n                  </CardContent>\r\n                </Card>\r\n              </Grid>\r\n\r\n              {/* Health Status */}\r\n              <Grid item xs={12} md={6}>\r\n                <Card>\r\n                  <CardHeader title=\"Health Status\" />\r\n                  <CardContent>\r\n                    <Box className=\"mb-3\">\r\n                      <Typography variant=\"body2\" className=\"mb-1\"><strong>Overall Status:</strong></Typography>\r\n                      <Chip\r\n                        icon={getHealthStatusIcon(healthProfile.healthStatus)}\r\n                        label={healthProfile.healthStatus}\r\n                        color={getHealthStatusColor(healthProfile.healthStatus)}\r\n                      />\r\n                    </Box>\r\n                    {healthProfile.lastCheckup && healthProfile.lastCheckup !== 'Invalid Date' && !isNaN(new Date(healthProfile.lastCheckup)) && (\r\n                      <Typography variant=\"body2\" className=\"mb-2\">\r\n                        <strong>Last Checkup:</strong> {new Date(healthProfile.lastCheckup).toLocaleDateString()}\r\n                      </Typography>\r\n                    )}\r\n                    {healthProfile.nextCheckup && healthProfile.nextCheckup !== 'Invalid Date' && !isNaN(new Date(healthProfile.nextCheckup)) && (\r\n                      <Typography variant=\"body2\">\r\n                        <strong>Next Checkup:</strong> {new Date(healthProfile.nextCheckup).toLocaleDateString()}\r\n                      </Typography>\r\n                    )}\r\n                  </CardContent>\r\n                </Card>\r\n              </Grid>\r\n\r\n              {/* Health Conditions */}\r\n              <Grid item xs={12} md={6}>\r\n                <Card>\r\n                  <CardHeader title=\"Health Conditions & Allergies\" />\r\n                  <CardContent>\r\n                    <Accordion>\r\n                      <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n                        <Typography variant=\"subtitle2\">\r\n                          Health Conditions ({healthProfile.healthConditions ? healthProfile.healthConditions.length : 0})\r\n                        </Typography>\r\n                      </AccordionSummary>\r\n                      <AccordionDetails>\r\n                        {console.log('Current healthProfile healthConditions:', healthProfile.healthConditions)}\r\n                        {healthProfile.healthConditions && healthProfile.healthConditions.length > 0 ? (\r\n                          <Box>\r\n                            {healthProfile.healthConditions.map((condition, index) => (\r\n                              <Chip key={index} label={String(condition)} className=\"mr-1 mb-1\" />\r\n                            ))}\r\n                          </Box>\r\n                        ) : (\r\n                          <Typography variant=\"body2\" color=\"textSecondary\">\r\n                            No health conditions reported (Data: {JSON.stringify(healthProfile.healthConditions)})\r\n                          </Typography>\r\n                        )}\r\n                      </AccordionDetails>\r\n                    </Accordion>\r\n\r\n                    <Accordion>\r\n                      <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n                        <Typography variant=\"subtitle2\">\r\n                          Allergies ({healthProfile.allergies ? healthProfile.allergies.length : 0})\r\n                        </Typography>\r\n                      </AccordionSummary>\r\n                      <AccordionDetails>\r\n                        {/* Enhanced Debug logging */}\r\n                        {console.log('Current healthProfile allergies:', healthProfile.allergies)}\r\n                        {console.log('Allergies type:', typeof healthProfile.allergies)}\r\n                        {console.log('Allergies is array:', Array.isArray(healthProfile.allergies))}\r\n                        {healthProfile.allergies && healthProfile.allergies.length > 0 ? (\r\n                          <Box>\r\n                            {console.log('Rendering allergies:', healthProfile.allergies)}\r\n                            {healthProfile.allergies.map((allergy, index) => (\r\n                              <Chip key={index} label={String(allergy)} color=\"error\" className=\"mr-1 mb-1\" />\r\n                            ))}\r\n                          </Box>\r\n                        ) : (\r\n                          <Typography variant=\"body2\" color=\"textSecondary\">\r\n                            No allergies reported (Data: {JSON.stringify(healthProfile.allergies)})\r\n                          </Typography>\r\n                        )}\r\n                      </AccordionDetails>\r\n                    </Accordion>\r\n\r\n                    <Accordion>\r\n                      <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n                        <Typography variant=\"subtitle2\">\r\n                          Current Medications ({healthProfile.medications ? healthProfile.medications.length : 0})\r\n                        </Typography>\r\n                      </AccordionSummary>\r\n                      <AccordionDetails>\r\n                        {console.log('Current healthProfile medications:', healthProfile.medications)}\r\n                        {healthProfile.medications && healthProfile.medications.length > 0 ? (\r\n                          <Box>\r\n                            {healthProfile.medications.map((medication, index) => (\r\n                              <Chip key={index} label={String(medication)} color=\"primary\" className=\"mr-1 mb-1\" />\r\n                            ))}\r\n                          </Box>\r\n                        ) : (\r\n                          <Typography variant=\"body2\" color=\"textSecondary\">\r\n                            No current medications (Data: {JSON.stringify(healthProfile.medications)})\r\n                          </Typography>\r\n                        )}\r\n                      </AccordionDetails>\r\n                    </Accordion>\r\n                  </CardContent>\r\n                </Card>\r\n              </Grid>\r\n\r\n              {/* Vision & Hearing and Medical History */}\r\n              <Grid item xs={12} md={6}>\r\n                <Card>\r\n                  <CardHeader title=\"Vision & Hearing Status\" />\r\n                  <CardContent>\r\n                    <Grid container spacing={2}>\r\n                      <Grid item xs={6}>\r\n                        <Typography variant=\"subtitle2\" color=\"textSecondary\">Vision Status</Typography>\r\n                        <Typography variant=\"body2\">{healthProfile.visionStatus || 'Not specified'}</Typography>\r\n                      </Grid>\r\n                      <Grid item xs={6}>\r\n                        <Typography variant=\"subtitle2\" color=\"textSecondary\">Hearing Status</Typography>\r\n                        <Typography variant=\"body2\">{healthProfile.hearingStatus || 'Not specified'}</Typography>\r\n                      </Grid>\r\n                    </Grid>\r\n                  </CardContent>\r\n                </Card>\r\n              </Grid>\r\n\r\n              {/* Medical History */}\r\n              <Grid item xs={12} md={6}>\r\n                <Card>\r\n                  <CardHeader title=\"Medical History\" />\r\n                  <CardContent>\r\n                    <Typography variant=\"body2\">\r\n                      {healthProfile.medicalHistory || 'No medical history provided'}\r\n                    </Typography>\r\n                  </CardContent>\r\n                </Card>\r\n              </Grid>\r\n\r\n              {/* Other Health Information */}\r\n              <Grid item xs={12}>\r\n                <Card>\r\n                  <CardHeader title=\"Other Health Information\" />\r\n                  <CardContent>\r\n                    <Accordion>\r\n                      <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n                        <Typography variant=\"subtitle2\">Special Needs or Accommodations</Typography>\r\n                      </AccordionSummary>\r\n                      <AccordionDetails>\r\n                        <Typography variant=\"body2\">\r\n                          {healthProfile.specialNeeds || 'None specified'}\r\n                        </Typography>\r\n                      </AccordionDetails>\r\n                    </Accordion>\r\n\r\n                    <Accordion>\r\n                      <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n                        <Typography variant=\"subtitle2\">Physical Limitations or Activity Restrictions</Typography>\r\n                      </AccordionSummary>\r\n                      <AccordionDetails>\r\n                        <Typography variant=\"body2\">\r\n                          {healthProfile.physicalLimitations || 'None specified'}\r\n                        </Typography>\r\n                      </AccordionDetails>\r\n                    </Accordion>\r\n\r\n                    <Accordion>\r\n                      <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n                        <Typography variant=\"subtitle2\">Mental or Emotional Health Concerns</Typography>\r\n                      </AccordionSummary>\r\n                      <AccordionDetails>\r\n                        <Typography variant=\"body2\">\r\n                          {healthProfile.mentalHealthConcerns || 'None specified'}\r\n                        </Typography>\r\n                      </AccordionDetails>\r\n                    </Accordion>\r\n\r\n                    <Accordion>\r\n                      <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n                        <Typography variant=\"subtitle2\">Dietary Restrictions or Preferences</Typography>\r\n                      </AccordionSummary>\r\n                      <AccordionDetails>\r\n                        <Typography variant=\"body2\">\r\n                          {healthProfile.dietaryRestrictions || 'None specified'}\r\n                        </Typography>\r\n                      </AccordionDetails>\r\n                    </Accordion>\r\n                  </CardContent>\r\n                </Card>\r\n              </Grid>\r\n\r\n              {/* Vaccinations */}\r\n              <Grid item xs={12} md={6}>\r\n                <Card>\r\n                  <CardHeader title=\"Vaccination Records\" />\r\n                  <CardContent>\r\n                    {healthProfile.vaccinations && healthProfile.vaccinations.length > 0 ? (\r\n                      <TableContainer component={Paper} variant=\"outlined\">\r\n                        <Table size=\"small\">\r\n                          <TableHead>\r\n                            <TableRow>\r\n                              <TableCell sx={{ fontWeight: 'bold' }}>Vaccine</TableCell>\r\n                              <TableCell sx={{ fontWeight: 'bold' }}>Date</TableCell>\r\n                            </TableRow>\r\n                          </TableHead>\r\n                          <TableBody>\r\n                            {healthProfile.vaccinations.map((vaccination, index) => (\r\n                              <TableRow key={index}>\r\n                                <TableCell sx={{ py: 1 }}>{vaccination.vaccineName}</TableCell>\r\n                                <TableCell sx={{ py: 1 }}>\r\n                                  {vaccination.vaccinationDate ? \r\n                                    new Date(vaccination.vaccinationDate).toLocaleDateString() : \r\n                                    'Date not available'}\r\n                                </TableCell>\r\n                              </TableRow>\r\n                            ))}\r\n                          </TableBody>\r\n                        </Table>\r\n                      </TableContainer>\r\n                    ) : (\r\n                      <Typography variant=\"body2\" color=\"textSecondary\">\r\n                        No vaccination records available\r\n                      </Typography>\r\n                    )}\r\n                  </CardContent>\r\n                </Card>\r\n              </Grid>\r\n\r\n              {/* Emergency Contacts */}\r\n              <Grid item xs={12} md={6}>\r\n                <Card>\r\n                  <CardHeader title=\"Emergency Contacts\" />\r\n                  <CardContent>\r\n                    <List>\r\n                      {healthProfile.emergencyContacts.map((contact, index) => (\r\n                        <ListItem key={index}>\r\n                          <ListItemIcon>\r\n                            <PhoneIcon />\r\n                          </ListItemIcon>\r\n                          <ListItemText\r\n                            primary={contact.name}\r\n                            secondary={`${contact.relationship} - ${contact.phone}`}\r\n                          />\r\n                        </ListItem>\r\n                      ))}\r\n                    </List>\r\n                  </CardContent>\r\n                </Card>\r\n              </Grid>\r\n\r\n              {/* Medical History Timeline */}\r\n              <Grid item xs={12}>\r\n                <Card>\r\n                  <CardHeader title=\"Recent Medical Events\" />\r\n                  <CardContent sx={{ p: 0 }}>\r\n                    <Timeline sx={{ \r\n                      '& .MuiTimelineItem-root': {\r\n                        '&:before': {\r\n                          flex: 0,\r\n                          padding: 0\r\n                        }\r\n                      },\r\n                      '& .MuiTimelineContent-root': {\r\n                        flex: 1,\r\n                        px: 2,\r\n                        py: 1\r\n                      }\r\n                    }}>\r\n                      {healthProfile.medicalEvents && healthProfile.medicalEvents.length > 0 ? (\r\n                        healthProfile.medicalEvents.map((event, index) => (\r\n                          <TimelineItem key={index}>\r\n                            <TimelineSeparator>\r\n                              <TimelineDot color={\r\n                                event.severity === 'LOW' ? 'success' : \r\n                                event.severity === 'MEDIUM' ? 'warning' : \r\n                                event.severity === 'HIGH' ? 'error' : 'primary'\r\n                              } />\r\n                              {index < healthProfile.medicalEvents.length - 1 && <TimelineConnector />}\r\n                            </TimelineSeparator>\r\n                            <TimelineContent sx={{ flex: 1, minWidth: 0 }}>\r\n                              <Box sx={{ \r\n                                backgroundColor: 'background.paper', \r\n                                borderRadius: 2, \r\n                                p: 2,\r\n                                border: '1px solid',\r\n                                borderColor: 'divider',\r\n                                boxShadow: 1,\r\n                                width: '100%',\r\n                                maxWidth: 'none'\r\n                              }}>\r\n                                {/* Header Row */}\r\n                                <Box sx={{ \r\n                                  display: 'flex', \r\n                                  justifyContent: 'space-between', \r\n                                  alignItems: 'center',\r\n                                  mb: 2,\r\n                                  pb: 1,\r\n                                  borderBottom: '1px solid',\r\n                                  borderColor: 'divider'\r\n                                }}>\r\n                                  <Typography variant=\"h6\" fontWeight=\"bold\" color=\"primary\">\r\n                                    {event.type || event.eventType || 'INJURY'}\r\n                                  </Typography>\r\n                                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                                    <Typography variant=\"body2\" color=\"textSecondary\">\r\n                                      {event.date ? new Date(event.date).toLocaleDateString() : 'Date not available'}\r\n                                    </Typography>\r\n                                    <Chip \r\n                                      label={event.severity || 'MEDIUM'} \r\n                                      size=\"small\" \r\n                                      color={\r\n                                        event.severity === 'LOW' ? 'success' : \r\n                                        event.severity === 'MEDIUM' ? 'warning' : \r\n                                        event.severity === 'HIGH' ? 'error' : 'warning'\r\n                                      }\r\n                                    />\r\n                                  </Box>\r\n                                </Box>\r\n                                \r\n                                {/* Details Grid - Stretch to full width */}\r\n                                <Grid container spacing={3} sx={{ width: '100%' }}>\r\n                                  {event.description && (\r\n                                    <Grid item xs={12} md={6}>\r\n                                      <Box sx={{ \r\n                                        backgroundColor: 'grey.50', \r\n                                        p: 2, \r\n                                        borderRadius: 1,\r\n                                        height: '100%'\r\n                                      }}>\r\n                                        <Typography variant=\"body2\" fontWeight=\"bold\" color=\"text.primary\" sx={{ mb: 1 }}>\r\n                                          Injury/Condition:\r\n                                        </Typography>\r\n                                        <Typography variant=\"body2\" color=\"text.secondary\">\r\n                                          {event.description}\r\n                                        </Typography>\r\n                                      </Box>\r\n                                    </Grid>\r\n                                  )}\r\n                                  \r\n                                  {event.symptoms && (\r\n                                    <Grid item xs={12} md={6}>\r\n                                      <Box sx={{ \r\n                                        backgroundColor: 'grey.50', \r\n                                        p: 2, \r\n                                        borderRadius: 1,\r\n                                        height: '100%'\r\n                                      }}>\r\n                                        <Typography variant=\"body2\" fontWeight=\"bold\" color=\"text.primary\" sx={{ mb: 1 }}>\r\n                                          Symptoms:\r\n                                        </Typography>\r\n                                        <Typography variant=\"body2\" color=\"text.secondary\">\r\n                                          {event.symptoms}\r\n                                        </Typography>\r\n                                      </Box>\r\n                                    </Grid>\r\n                                  )}\r\n                                  \r\n                                  {event.treatment && (\r\n                                    <Grid item xs={12}>\r\n                                      <Box sx={{ \r\n                                        backgroundColor: 'blue.50', \r\n                                        p: 2, \r\n                                        borderRadius: 1\r\n                                      }}>\r\n                                        <Typography variant=\"body2\" fontWeight=\"bold\" color=\"text.primary\" sx={{ mb: 1 }}>\r\n                                          Treatment Provided:\r\n                                        </Typography>\r\n                                        <Typography variant=\"body2\" color=\"text.secondary\">\r\n                                          {event.treatment}\r\n                                        </Typography>\r\n                                      </Box>\r\n                                    </Grid>\r\n                                  )}\r\n                                  \r\n                                  {event.medicationsUsed && event.medicationsUsed.length > 0 && (\r\n                                    <Grid item xs={12}>\r\n                                      <Box sx={{ \r\n                                        backgroundColor: 'green.50', \r\n                                        p: 2, \r\n                                        borderRadius: 1\r\n                                      }}>\r\n                                        <Typography variant=\"body2\" fontWeight=\"bold\" color=\"text.primary\" sx={{ mb: 1 }}>\r\n                                          Medications Used:\r\n                                        </Typography>\r\n                                        <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1 }}>\r\n                                          {event.medicationsUsed.map((med, medIndex) => (\r\n                                            <Chip \r\n                                              key={medIndex} \r\n                                              label={`${med.name}${med.dosage ? ` - ${med.dosage}` : ''}`}\r\n                                              size=\"small\"\r\n                                              color=\"success\"\r\n                                              variant=\"outlined\"\r\n                                              sx={{ fontWeight: 'medium' }}\r\n                                            />\r\n                                          ))}\r\n                                        </Box>\r\n                                      </Box>\r\n                                    </Grid>\r\n                                  )}\r\n                                  \r\n                                  {event.followUpRequired && (\r\n                                    <Grid item xs={12}>\r\n                                      <Box sx={{ \r\n                                        display: 'flex', \r\n                                        alignItems: 'center', \r\n                                        gap: 1,\r\n                                        backgroundColor: 'warning.light',\r\n                                        color: 'warning.contrastText',\r\n                                        p: 2,\r\n                                        borderRadius: 1\r\n                                      }}>\r\n                                        <Typography variant=\"body2\" fontWeight=\"bold\">\r\n                                           Follow-up Required\r\n                                        </Typography>\r\n                                      </Box>\r\n                                    </Grid>\r\n                                  )}\r\n                                </Grid>\r\n                              </Box>\r\n                            </TimelineContent>\r\n                          </TimelineItem>\r\n                        ))\r\n                      ) : (\r\n                        <TimelineItem>\r\n                          <TimelineSeparator>\r\n                            <TimelineDot color=\"grey\" />\r\n                          </TimelineSeparator>\r\n                          <TimelineContent>\r\n                            <Typography variant=\"body2\" color=\"textSecondary\">\r\n                              No recent medical events recorded\r\n                            </Typography>\r\n                          </TimelineContent>\r\n                        </TimelineItem>\r\n                      )}\r\n                    </Timeline>\r\n                  </CardContent>\r\n                </Card>\r\n              </Grid>\r\n            </Grid>\r\n          )}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setProfileDialogOpen(false)}>Close</Button>\r\n          <Button variant=\"contained\" startIcon={<EditIcon />} onClick={() => handleEditProfile(healthProfile)}>\r\n            Edit Profile\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Edit Profile Dialog */}\r\n      <Dialog open={editDialogOpen} onClose={() => setEditDialogOpen(false)} maxWidth=\"md\" fullWidth>\r\n        <DialogTitle>Edit Health Profile</DialogTitle>\r\n        <DialogContent>\r\n          {editingProfile && (\r\n            <Box sx={{ mt: 2 }}>\r\n              <Grid container spacing={3}>\r\n                {/* Basic Information */}\r\n                <Grid item xs={12}>\r\n                  <Typography variant=\"h6\" gutterBottom>\r\n                    Student: {editingProfile.name} ({editingProfile.studentCode})\r\n                  </Typography>\r\n                </Grid>\r\n\r\n                {/* Allergies */}\r\n                <Grid item xs={12} md={6}>\r\n                  <Typography variant=\"subtitle1\" gutterBottom>Allergies</Typography>\r\n                  <TextField\r\n                    fullWidth\r\n                    multiline\r\n                    rows={3}\r\n                    value={Array.isArray(editingProfile.allergies) ? editingProfile.allergies.join(', ') : editingProfile.allergies || ''}\r\n                    onChange={(e) => setEditingProfile({\r\n                      ...editingProfile,\r\n                      allergies: e.target.value.split(',').map(item => item.trim()).filter(item => item)\r\n                    })}\r\n                    placeholder=\"Enter allergies separated by commas\"\r\n                  />\r\n                </Grid>\r\n\r\n                {/* Chronic Illnesses */}\r\n                <Grid item xs={12} md={6}>\r\n                  <Typography variant=\"subtitle1\" gutterBottom>Chronic Illnesses</Typography>\r\n                  <TextField\r\n                    fullWidth\r\n                    multiline\r\n                    rows={3}\r\n                    value={Array.isArray(editingProfile.chronicIllnesses) ? editingProfile.chronicIllnesses.join(', ') : editingProfile.chronicIllnesses || ''}\r\n                    onChange={(e) => setEditingProfile({\r\n                      ...editingProfile,\r\n                      chronicIllnesses: e.target.value.split(',').map(item => item.trim()).filter(item => item)\r\n                    })}\r\n                    placeholder=\"Enter chronic illnesses separated by commas\"\r\n                  />\r\n                </Grid>\r\n\r\n                {/* Vision Status */}\r\n                <Grid item xs={12} md={6}>\r\n                  <Typography variant=\"subtitle1\" gutterBottom>Vision Status</Typography>\r\n                  <TextField\r\n                    fullWidth\r\n                    value={editingProfile.visionStatus || ''}\r\n                    onChange={(e) => setEditingProfile({\r\n                      ...editingProfile,\r\n                      visionStatus: e.target.value\r\n                    })}\r\n                    placeholder=\"e.g., Wears glasses, 20/20\"\r\n                  />\r\n                </Grid>\r\n\r\n                {/* Hearing Status */}\r\n                <Grid item xs={12} md={6}>\r\n                  <Typography variant=\"subtitle1\" gutterBottom>Hearing Status</Typography>\r\n                  <TextField\r\n                    fullWidth\r\n                    value={editingProfile.hearingStatus || ''}\r\n                    onChange={(e) => setEditingProfile({\r\n                      ...editingProfile,\r\n                      hearingStatus: e.target.value\r\n                    })}\r\n                    placeholder=\"e.g., Normal, Uses hearing aids\"\r\n                  />\r\n                </Grid>\r\n\r\n                {/* Special Needs */}\r\n                <Grid item xs={12} md={6}>\r\n                  <Typography variant=\"subtitle1\" gutterBottom>Special Needs</Typography>\r\n                  <TextField\r\n                    fullWidth\r\n                    multiline\r\n                    rows={2}\r\n                    value={editingProfile.specialNeeds || ''}\r\n                    onChange={(e) => setEditingProfile({\r\n                      ...editingProfile,\r\n                      specialNeeds: e.target.value\r\n                    })}\r\n                    placeholder=\"Describe any special needs\"\r\n                  />\r\n                </Grid>\r\n\r\n                {/* Physical Limitations */}\r\n                <Grid item xs={12} md={6}>\r\n                  <Typography variant=\"subtitle1\" gutterBottom>Physical Limitations</Typography>\r\n                  <TextField\r\n                    fullWidth\r\n                    multiline\r\n                    rows={2}\r\n                    value={editingProfile.physicalLimitations || ''}\r\n                    onChange={(e) => setEditingProfile({\r\n                      ...editingProfile,\r\n                      physicalLimitations: e.target.value\r\n                    })}\r\n                    placeholder=\"Describe any physical limitations\"\r\n                  />\r\n                </Grid>\r\n\r\n                {/* Mental Health Concerns */}\r\n                <Grid item xs={12} md={6}>\r\n                  <Typography variant=\"subtitle1\" gutterBottom>Mental Health Concerns</Typography>\r\n                  <TextField\r\n                    fullWidth\r\n                    multiline\r\n                    rows={2}\r\n                    value={editingProfile.mentalHealthConcerns || ''}\r\n                    onChange={(e) => setEditingProfile({\r\n                      ...editingProfile,\r\n                      mentalHealthConcerns: e.target.value\r\n                    })}\r\n                    placeholder=\"Describe any mental health concerns\"\r\n                  />\r\n                </Grid>\r\n\r\n                {/* Dietary Restrictions */}\r\n                <Grid item xs={12} md={6}>\r\n                  <Typography variant=\"subtitle1\" gutterBottom>Dietary Restrictions</Typography>\r\n                  <TextField\r\n                    fullWidth\r\n                    multiline\r\n                    rows={2}\r\n                    value={editingProfile.dietaryRestrictions || ''}\r\n                    onChange={(e) => setEditingProfile({\r\n                      ...editingProfile,\r\n                      dietaryRestrictions: e.target.value\r\n                    })}\r\n                    placeholder=\"e.g., Vegetarian, Gluten-free\"\r\n                  />\r\n                </Grid>\r\n\r\n                {/* Medical History */}\r\n                <Grid item xs={12}>\r\n                  <Typography variant=\"subtitle1\" gutterBottom>Medical History</Typography>\r\n                  <TextField\r\n                    fullWidth\r\n                    multiline\r\n                    rows={3}\r\n                    value={editingProfile.medicalHistory || ''}\r\n                    onChange={(e) => setEditingProfile({\r\n                      ...editingProfile,\r\n                      medicalHistory: e.target.value\r\n                    })}\r\n                    placeholder=\"Describe relevant medical history\"\r\n                  />\r\n                </Grid>\r\n              </Grid>\r\n            </Box>\r\n          )}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setEditDialogOpen(false)} disabled={isSubmittingEdit}>\r\n            Cancel\r\n          </Button>\r\n          <Button \r\n            variant=\"contained\" \r\n            onClick={handleSaveEdit} \r\n            disabled={isSubmittingEdit}\r\n            startIcon={isSubmittingEdit ? <CircularProgress size={20} /> : null}\r\n          >\r\n            {isSubmittingEdit ? 'Saving...' : 'Save Changes'}\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default StudentManagement;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}