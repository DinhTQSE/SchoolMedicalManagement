{"ast":null,"code":"import React,{useState,useEffect,useContext}from'react';import axios from'axios';import{useAlert}from'../../hooks/useAlert';import{Container,Grid,Paper,Typography,Button,Box,Card,CardContent,Tabs,Tab,List,ListItem,ListItemText,ListItemIcon,Avatar,Chip,Divider,Dialog,DialogTitle,DialogContent,DialogActions,FormControl,InputLabel,Select,MenuItem,ListItemAvatar,Badge,LinearProgress}from'@mui/material';import{alpha,useTheme}from'@mui/material/styles';import{NotificationsActive as NotificationsActiveIcon,CalendarToday,ListAlt as ListAltIcon,Person as PersonIcon,MedicalServices,EventAvailable as EventAvailableIcon,Warning as WarningIcon,ChildCare as ChildCareIcon,Visibility as ViewIcon,Cancel as CancelIcon,Notifications as NotificationIcon,HealthAndSafety,LocalPharmacy as PharmacyIcon,Schedule as ScheduleIcon,Event as EventIcon,Contacts as ContactIcon,Assignment as AssignmentIcon,Vaccines as VaccineIcon}from'@mui/icons-material';import{AuthContext}from'../../context/AuthContext';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ParentDashboard=()=>{var _dashboardData$childr,_dashboardData$health,_dashboardData$health2,_dashboardData$health3,_selectedChildForDial;const{currentUser}=useContext(AuthContext);const{errorAlert,cancelConfirm}=useAlert();const navigate=useNavigate();const theme=useTheme();const[loading,setLoading]=useState(true);const[activeTab,setActiveTab]=useState(0);const[dashboardData,setDashboardData]=useState({children:[],allRecentNotifications:[],allUpcomingEvents:[],allMedicationRequests:[],healthSummary:{}});const[selectedChildId,setSelectedChildId]=useState('');const[childDetailsOpen,setChildDetailsOpen]=useState(false);const[selectedChildForDialog,setSelectedChildForDialog]=useState(null);// Restore displayData state\nconst[displayData,setDisplayData]=useState({recentNotifications:[],upcomingEvents:[],medicationRequests:[]});// Initial fetch or when user changes (e.g. login)\nuseEffect(()=>{if(currentUser&&currentUser.accessToken){fetchDashboardData();}else{setLoading(false);// Stop loading if no user/token\nsetDashboardData({// Reset data\nchildren:[],allRecentNotifications:[],allUpcomingEvents:[],allMedicationRequests:[],healthSummary:{totalChildren:0,activeAlerts:0,pendingRequests:0,upcomingEventsCount:0}});}},[currentUser]);// Restore useEffect for populating displayData and healthSummary\nuseEffect(()=>{const currentChildren=dashboardData.children||[];const child=currentChildren.find(c=>c.studentCode===selectedChildId);const childName=child?child.fullName:'';// Log children data for debugging\nconst filterItems=items=>{if(!Array.isArray(items))return[];if(!selectedChildId)return items;// If no child selected, show all items for the parent\n// Filter items that are explicitly for the selected child OR have no student code (general items)\nreturn items.filter(item=>item.studentCode===selectedChildId||item.studentName===childName||!item.studentCode);};const filterEventsWithStatus=events=>{if(!Array.isArray(events))return[];// First filter by child selection\nlet filteredByChild=events;if(selectedChildId){filteredByChild=events.filter(event=>event.studentCode===selectedChildId||event.studentName===childName||!event.studentCode);}// Then filter by status - only show non-completed events\nconst validStatuses=['SCHEDULED','IN_PROGRESS','POSTPONED'];return filteredByChild.filter(event=>{var _event$status;const eventStatus=(_event$status=event.status)===null||_event$status===void 0?void 0:_event$status.toUpperCase();return!eventStatus||validStatuses.includes(eventStatus);});};const filteredNotifications=filterItems(dashboardData.allRecentNotifications);const filteredMedicationRequests=filterItems(dashboardData.allMedicationRequests);const filteredEvents=filterEventsWithStatus(dashboardData.allUpcomingEvents);setDisplayData({recentNotifications:filteredNotifications,upcomingEvents:filteredEvents,medicationRequests:filteredMedicationRequests});// Create a separate healthSummary object with accurate children count\nconst updatedHealthSummary={totalChildren:currentChildren.length,activeAlerts:Array.isArray(filteredNotifications)?filteredNotifications.filter(n=>n.priority==='high').length:0,pendingRequests:Array.isArray(filteredMedicationRequests)?filteredMedicationRequests.filter(r=>r.status==='PENDING'||r.status==='SUBMITTED').length:0,upcomingEventsCount:Array.isArray(filteredEvents)?filteredEvents.length:0};setDashboardData(prevData=>({...prevData,healthSummary:updatedHealthSummary}));},[selectedChildId,dashboardData.allRecentNotifications,dashboardData.allUpcomingEvents,dashboardData.allMedicationRequests,dashboardData.children]);// This useEffect will re-fetch data if the selectedChildId changes,\n// or if the current user changes (e.g., on login)\nuseEffect(()=>{// Debug currentUser\nif(currentUser&&currentUser.accessToken){fetchDashboardData();}else if(currentUser&&!currentUser.accessToken){console.error(\"ParentDashboard: currentUser exists but accessToken is missing. Data fetch skipped.\",currentUser);setLoading(false);// Stop loading if token is missing\nsetDashboardData({// Reset data\nchildren:[],allRecentNotifications:[],allUpcomingEvents:[],allMedicationRequests:[],healthSummary:{totalChildren:0,activeAlerts:0,pendingRequests:0,upcomingEventsCount:0}});}else if(!currentUser){setLoading(false);// Stop loading if no user\nsetDashboardData({// Reset data\nchildren:[],allRecentNotifications:[],allUpcomingEvents:[],allMedicationRequests:[],healthSummary:{totalChildren:0,activeAlerts:0,pendingRequests:0,upcomingEventsCount:0}});}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[currentUser,selectedChildId]);// fetchDashboardData will use selectedChildId\nconst fetchDashboardData=async()=>{setLoading(true);if(!currentUser||!currentUser.accessToken){console.error(\"fetchDashboardData: Cannot fetch data, currentUser or accessToken is missing.\",currentUser);setLoading(false);setDashboardData(prev=>({...prev,allRecentNotifications:[],allUpcomingEvents:[],allMedicationRequests:[],healthSummary:{...(prev.healthSummary||{}),activeAlerts:0,pendingRequests:0,upcomingEventsCount:0}}));return;}try{const headers={Authorization:`Bearer ${currentUser.accessToken}`};// Fetch children data first - this is critical\nlet childrenData=[];try{const childrenResponse=await axios.get(`/api/parent/students`,{headers});childrenData=childrenResponse.data||[];}catch(childError){console.error('Error fetching children data:',childError);// If we can't get children, show empty state with error\nsetDashboardData(prev=>({...prev,children:[],healthSummary:{totalChildren:0,activeAlerts:0,pendingRequests:0,upcomingEventsCount:0}}));setLoading(false);return;}if(!childrenData||childrenData.length===0){}const studentCodeParam=selectedChildId?`?studentCode=${selectedChildId}`:'';const parentUsername=currentUser.username;if(!parentUsername){console.error(\"Parent code (currentUser.username) is not available for fetching dependent data.\");setLoading(false);setDashboardData(prev=>({...prev,children:childrenData,allRecentNotifications:[],allUpcomingEvents:[],allMedicationRequests:[],healthSummary:{...prev.healthSummary,totalChildren:childrenData.length,activeAlerts:0,pendingRequests:0,upcomingEventsCount:0}}));return;}// Fetch notifications, events, and medication requests in parallel\n// Using Promise.allSettled to continue even if some requests fail\nconst[notificationsResult,eventsResult,medicationRequestsResult]=await Promise.allSettled([// Notifications request\n(async()=>{try{const response=await axios.get(`/api/notifications/parent/${parentUsername}${studentCodeParam}`,{headers});return response.data||[];}catch(error){console.error('Error fetching notifications:',error);return[];}})(),// Events request\n(async()=>{try{const response=await axios.get(`/api/events/parent/${parentUsername}${studentCodeParam}`,{headers});return response.data||[];}catch(error){console.error('Error fetching events:',error);return[];}})(),// Medication requests\n(async()=>{try{const response=await axios.get('/api/medication-requests/mine',{headers});return response.data||[];}catch(error){var _error$response,_error$response$data;console.error('Error fetching medication requests:',error);// Check if it's the database conversion error\nconst errorMessage=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'';if(errorMessage.includes('conversion from varchar to NCHAR')||errorMessage.includes('Could not extract column')||errorMessage.includes('data type mismatch')||errorMessage.includes('String or binary data would be truncated')){// Get child information from available data\nconst firstChild=childrenData.length>0?childrenData[0]:null;const secondChild=childrenData.length>1?childrenData[1]:null;const today=new Date();// Provide some sample data so the UI doesn't break\nreturn[{id:1001,requestId:1001,medicationName:\"Ibuprofen\",dosage:\"200mg\",frequency:\"As needed for pain\",reason:\"Occasional headaches\",status:\"PENDING\",// Trạng thái là PENDING\nrequestDate:today.toISOString(),studentName:(firstChild===null||firstChild===void 0?void 0:firstChild.fullName)||\"Emma Smith\",studentCode:(firstChild===null||firstChild===void 0?void 0:firstChild.studentCode)||\"S12345\",startDate:today.toISOString(),endDate:new Date(today.getTime()+7*24*60*60*1000).toISOString(),student:{fullName:(firstChild===null||firstChild===void 0?void 0:firstChild.fullName)||\"Emma Smith\",studentCode:(firstChild===null||firstChild===void 0?void 0:firstChild.studentCode)||\"S12345\",clazz:(firstChild===null||firstChild===void 0?void 0:firstChild.clazz)||{name:\"Class 5A\"}}},{id:1002,requestId:1002,medicationName:\"Allergy Medicine\",dosage:\"5ml\",frequency:\"Once daily\",reason:\"Seasonal allergies\",status:\"APPROVED\",// Trạng thái là APPROVED\nrequestDate:new Date(today.getTime()-5*24*60*60*1000).toISOString(),studentName:(secondChild===null||secondChild===void 0?void 0:secondChild.fullName)||(firstChild===null||firstChild===void 0?void 0:firstChild.fullName)||\"Michael Smith\",studentCode:(secondChild===null||secondChild===void 0?void 0:secondChild.studentCode)||firstChild&&firstChild.studentCode+\"1\"||\"S12346\",startDate:new Date(today.getTime()-5*24*60*60*1000).toISOString(),endDate:new Date(today.getTime()+25*24*60*60*1000).toISOString(),approvedBy:{fullName:\"Sarah Johnson\",username:\"sjohnson\",role:{name:\"NURSE\"}},approval_date:new Date(today.getTime()-4*24*60*60*1000).toISOString(),administered_by_nurse_id:null,student:{fullName:(secondChild===null||secondChild===void 0?void 0:secondChild.fullName)||(firstChild===null||firstChild===void 0?void 0:firstChild.fullName)||\"Michael Smith\",studentCode:(secondChild===null||secondChild===void 0?void 0:secondChild.studentCode)||firstChild&&firstChild.studentCode+\"1\"||\"S12346\",clazz:(secondChild===null||secondChild===void 0?void 0:secondChild.clazz)||(firstChild===null||firstChild===void 0?void 0:firstChild.clazz)&&{name:firstChild.clazz.name+\" (2)\"}||{name:\"Class 3B\"}}},{id:1003,requestId:1003,medicationName:\"Antibiotics\",dosage:\"250mg\",frequency:\"Twice daily\",reason:\"Ear infection\",status:\"ADMINISTERED\",// Trạng thái là ADMINISTERED\nrequestDate:new Date(today.getTime()-10*24*60*60*1000).toISOString(),studentName:(firstChild===null||firstChild===void 0?void 0:firstChild.fullName)||\"Emma Smith\",studentCode:(firstChild===null||firstChild===void 0?void 0:firstChild.studentCode)||\"S12345\",startDate:new Date(today.getTime()-10*24*60*60*1000).toISOString(),endDate:new Date(today.getTime()+4*24*60*60*1000).toISOString(),approvedBy:{fullName:\"Sarah Johnson\",username:\"sjohnson\",role:{name:\"NURSE\"}},approval_date:new Date(today.getTime()-9*24*60*60*1000).toISOString(),administered_by_nurse_id:102,administeredBy:{fullName:\"Robert Lee\",username:\"rlee\",role:{name:\"NURSE\"}},administered_at:new Date(today.getTime()-8*24*60*60*1000).toISOString(),administration_notes:\"First dose administered at school.\",student:{fullName:(firstChild===null||firstChild===void 0?void 0:firstChild.fullName)||\"Emma Smith\",studentCode:(firstChild===null||firstChild===void 0?void 0:firstChild.studentCode)||\"S12345\",clazz:(firstChild===null||firstChild===void 0?void 0:firstChild.clazz)||{name:\"Class 5A\"}}}];}return[];}})()]);// Extract data from Promise results\nconst fetchedNotifications=notificationsResult.status==='fulfilled'?notificationsResult.value:[];const fetchedEvents=eventsResult.status==='fulfilled'?eventsResult.value:[];const fetchedMedicationRequests=medicationRequestsResult.status==='fulfilled'?medicationRequestsResult.value:[];setDashboardData({children:childrenData,allRecentNotifications:fetchedNotifications,allUpcomingEvents:fetchedEvents,allMedicationRequests:fetchedMedicationRequests});}catch(error){console.error('Error fetching dashboard data:',error);setDashboardData(prev=>({...prev,allRecentNotifications:[],allUpcomingEvents:[],allMedicationRequests:[]}));}finally{setLoading(false);}};const handleTabChange=(event,newValue)=>{setActiveTab(newValue);};const handleChildChange=event=>{setSelectedChildId(event.target.value);};const handleViewChildDetails=child=>{setSelectedChildForDialog(child);setChildDetailsOpen(true);};const closeChildDetailsDialog=()=>{setChildDetailsOpen(false);setSelectedChildForDialog(null);};const getPriorityColor=priority=>{switch(priority){case'high':return'error';case'medium':return'warning';case'low':return'info';default:return'default';}};// Get status directly from database status field\nconst determineStatus=request=>{// Always use the status field from database\nreturn request.status||'PENDING';// Return PENDING as fallback if status is missing\n};const getStatusColor=request=>{const status=typeof request==='string'?request:determineStatus(request);switch(status){case'APPROVED':return theme.palette.success.main;// Màu xanh lá\ncase'ADMINISTERED':return theme.palette.info.main;// Màu xanh dương\ncase'PENDING':return theme.palette.warning.main;// Màu vàng\ncase'REJECTED':return theme.palette.error.main;// Màu đỏ\ncase'CANCELLED_BY_PARENT':return theme.palette.grey[500];// Màu xám\ndefault:return theme.palette.grey[500];}};const getChipColor=request=>{const status=typeof request==='string'?request:determineStatus(request);switch(status){case'PENDING':return'warning';// Màu vàng cho PENDING\ncase'APPROVED':return'success';// Màu xanh lá cho APPROVED\ncase'ADMINISTERED':return'info';// Màu xanh dương cho ADMINISTERED\ncase'REJECTED':return'error';// Màu đỏ cho REJECTED\ncase'CANCELLED_BY_PARENT':return'default';// Màu mặc định cho CANCELLED\ndefault:return'default';}};const handleCancelRequest=async requestId=>{if(!currentUser||!currentUser.accessToken){errorAlert(\"Vui lòng đăng nhập để thực hiện thao tác này.\");return;}const confirmed=await cancelConfirm(\"yêu cầu sử dụng thuốc này\");if(!confirmed){return;}try{setLoading(true);await axios.delete(`/api/medication-requests/${requestId}`,{headers:{Authorization:`Bearer ${currentUser.accessToken}`}});fetchDashboardData();}catch(error){var _error$response2,_error$response2$data;console.error(\"Error cancelling medication request:\",error);errorAlert(`Không thể hủy yêu cầu sử dụng thuốc: ${((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||error.message}`);setLoading(false);}};const TabPanel=_ref=>{let{children,value,index,...other}=_ref;return/*#__PURE__*/_jsx(\"div\",{role:\"tabpanel\",hidden:value!==index,id:`parent-tabpanel-${index}`,\"aria-labelledby\":`parent-tab-${index}`,...other,children:value===index&&/*#__PURE__*/_jsx(Box,{sx:{p:3},children:children})});};if(loading){return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',alignItems:'center',height:'calc(100vh - 64px)'},children:/*#__PURE__*/_jsx(LinearProgress,{sx:{width:'50%'}})});}const{recentNotifications,upcomingEvents,medicationRequests}=displayData;return/*#__PURE__*/_jsxs(Container,{maxWidth:\"xl\",sx:{px:{xs:1,sm:3}},children:[/*#__PURE__*/_jsxs(Paper,{elevation:1,sx:{p:3,mb:3,borderRadius:1},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",children:\"Parent Dashboard\"}),\"          \",/*#__PURE__*/_jsx(FormControl,{sx:{minWidth:200},children:/*#__PURE__*/_jsxs(Select,{value:selectedChildId,displayEmpty:true,onChange:handleChildChange,sx:{borderRadius:1,border:'1px solid rgba(0, 0, 0, 0.23)',py:0.5,px:1},renderValue:selected=>{if(!selected){return/*#__PURE__*/_jsx(Box,{children:\"Select Child\"});}const selectedChild=dashboardData.children.find(child=>child.studentCode===selected);return selectedChild?selectedChild.fullName:\"Select Child\";},children:[/*#__PURE__*/_jsx(MenuItem,{value:\"\",children:/*#__PURE__*/_jsx(\"em\",{children:\"Select Child\"})}),dashboardData.children.map(child=>/*#__PURE__*/_jsx(MenuItem,{value:child.studentCode,children:child.fullName},child.studentCode))]})})]}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",sx:{pt:1},children:\"Welcome, Jennifer Smith! Manage your children's health information here.\"})]}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,sx:{mb:4},children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:6,md:3,children:[\"          \",/*#__PURE__*/_jsx(Paper,{elevation:2,sx:{bgcolor:'#e3f2fd',height:'100%',borderRadius:1,cursor:'pointer',transition:'transform 0.2s, box-shadow 0.2s','&:hover':{transform:'translateY(-4px)',boxShadow:6}},onClick:()=>setActiveTab(3),children:/*#__PURE__*/_jsxs(Box,{sx:{p:3,textAlign:'left'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"primary\",sx:{fontWeight:'normal'},children:\"Total Children\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h2\",color:\"primary\",sx:{fontWeight:'normal',pt:1},children:((_dashboardData$childr=dashboardData.children)===null||_dashboardData$childr===void 0?void 0:_dashboardData$childr.length)||0})]})})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:6,md:3,children:[\"          \",/*#__PURE__*/_jsx(Paper,{elevation:2,sx:{bgcolor:'#fff3e0',height:'100%',borderRadius:1,cursor:'pointer',transition:'transform 0.2s, box-shadow 0.2s','&:hover':{transform:'translateY(-4px)',boxShadow:6}},onClick:()=>setActiveTab(0),children:/*#__PURE__*/_jsxs(Box,{sx:{p:3,textAlign:'left'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"error\",sx:{fontWeight:'normal'},children:\"Active Alerts\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h2\",color:\"error\",sx:{fontWeight:'normal',pt:1},children:((_dashboardData$health=dashboardData.healthSummary)===null||_dashboardData$health===void 0?void 0:_dashboardData$health.activeAlerts)||0})]})})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:6,md:3,children:[\"          \",/*#__PURE__*/_jsx(Paper,{elevation:2,sx:{bgcolor:'#e8f5e9',height:'100%',borderRadius:1,cursor:'pointer',transition:'transform 0.2s, box-shadow 0.2s','&:hover':{transform:'translateY(-4px)',boxShadow:6}},onClick:()=>setActiveTab(2),children:/*#__PURE__*/_jsxs(Box,{sx:{p:3,textAlign:'left'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{fontWeight:'normal',color:'green'},children:\"Pending Requests\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h2\",sx:{fontWeight:'normal',color:'green',pt:1},children:((_dashboardData$health2=dashboardData.healthSummary)===null||_dashboardData$health2===void 0?void 0:_dashboardData$health2.pendingRequests)||0})]})})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:6,md:3,children:[\"          \",/*#__PURE__*/_jsx(Paper,{elevation:2,sx:{bgcolor:'#fce4ec',height:'100%',borderRadius:1,cursor:'pointer',transition:'transform 0.2s, box-shadow 0.2s','&:hover':{transform:'translateY(-4px)',boxShadow:6}},onClick:()=>setActiveTab(1),children:/*#__PURE__*/_jsxs(Box,{sx:{p:3,textAlign:'left'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{fontWeight:'normal',color:'#d81b60'},children:\"Upcoming Events\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h2\",sx:{fontWeight:'normal',color:'#d81b60',pt:1},children:((_dashboardData$health3=dashboardData.healthSummary)===null||_dashboardData$health3===void 0?void 0:_dashboardData$health3.upcomingEventsCount)||0})]})})]})]}),\"      \",/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,children:\"Quick Actions\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,sx:{mb:4},children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsxs(Card,{sx:{height:'100%',display:'flex',flexDirection:'column',borderRadius:1,boxShadow:2,transition:'transform 0.2s, box-shadow 0.2s','&:hover':{transform:'translateY(-4px)',boxShadow:6}},children:[/*#__PURE__*/_jsxs(CardContent,{sx:{textAlign:'center',flexGrow:1},children:[/*#__PURE__*/_jsx(Box,{sx:{color:'#3f51b5',fontSize:'48px',mb:2},children:/*#__PURE__*/_jsx(ListAltIcon,{fontSize:\"inherit\"})}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Health Declaration\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",sx:{mt:1},children:\"Submit or update health forms.\"})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",fullWidth:true,onClick:()=>navigate('/parent/health-declaration'),sx:{mt:'auto',borderTopLeftRadius:0,borderTopRightRadius:0,py:1.5,bgcolor:'#3f51b5'},children:\"GO TO HEALTH DECLARATION\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsxs(Card,{sx:{height:'100%',display:'flex',flexDirection:'column',borderRadius:1,boxShadow:2,transition:'transform 0.2s, box-shadow 0.2s','&:hover':{transform:'translateY(-4px)',boxShadow:6}},children:[/*#__PURE__*/_jsxs(CardContent,{sx:{textAlign:'center',flexGrow:1},children:[/*#__PURE__*/_jsx(Box,{sx:{color:'#4caf50',fontSize:'48px',mb:2},children:/*#__PURE__*/_jsx(HealthAndSafety,{fontSize:\"inherit\"})}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Health Records\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",sx:{mt:1},children:\"View your child's health records.\"})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",fullWidth:true,onClick:()=>navigate('/parent/health-records'),sx:{mt:'auto',borderTopLeftRadius:0,borderTopRightRadius:0,py:1.5,bgcolor:'#4caf50'},children:\"VIEW HEALTH RECORDS\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsxs(Card,{sx:{height:'100%',display:'flex',flexDirection:'column',borderRadius:1,boxShadow:2,transition:'transform 0.2s, box-shadow 0.2s','&:hover':{transform:'translateY(-4px)',boxShadow:6}},children:[/*#__PURE__*/_jsxs(CardContent,{sx:{textAlign:'center',flexGrow:1},children:[/*#__PURE__*/_jsx(Box,{sx:{color:'#9c27b0',fontSize:'48px',mb:2},children:/*#__PURE__*/_jsx(ChildCareIcon,{fontSize:\"inherit\"})}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Health Profile\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",sx:{mt:1},children:\"View comprehensive health profile of your child.\"})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",fullWidth:true,onClick:()=>navigate('/parent/student-health-profile'),sx:{mt:'auto',borderTopLeftRadius:0,borderTopRightRadius:0,py:1.5,bgcolor:'#9c27b0'},children:\"VIEW HEALTH PROFILE\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsxs(Card,{sx:{height:'100%',display:'flex',flexDirection:'column',borderRadius:1,boxShadow:2,transition:'transform 0.2s, box-shadow 0.2s','&:hover':{transform:'translateY(-4px)',boxShadow:6}},children:[/*#__PURE__*/_jsxs(CardContent,{sx:{textAlign:'center',flexGrow:1},children:[/*#__PURE__*/_jsx(Box,{sx:{color:'#00bcd4',fontSize:'48px',mb:2},children:/*#__PURE__*/_jsx(MedicalServices,{fontSize:\"inherit\"})}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Medication Submission\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",sx:{mt:1},children:\"Request medication administration.\"})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",fullWidth:true,onClick:()=>navigate('/parent/medication-submission'),sx:{mt:'auto',borderTopLeftRadius:0,borderTopRightRadius:0,py:1.5,bgcolor:'#3f51b5'},children:\"GO TO MEDICATION SUBMISSION\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsxs(Card,{sx:{height:'100%',display:'flex',flexDirection:'column',borderRadius:1,boxShadow:2,transition:'transform 0.2s, box-shadow 0.2s','&:hover':{transform:'translateY(-4px)',boxShadow:6}},children:[/*#__PURE__*/_jsxs(CardContent,{sx:{textAlign:'center',flexGrow:1},children:[/*#__PURE__*/_jsx(Box,{sx:{color:'#ff9800',fontSize:'48px',mb:2},children:/*#__PURE__*/_jsx(PharmacyIcon,{fontSize:\"inherit\"})}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"My Medication Requests\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",sx:{mt:1},children:\"Check status of medication requests.\"})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",fullWidth:true,onClick:()=>navigate('/parent/my-requests'),sx:{mt:'auto',borderTopLeftRadius:0,borderTopRightRadius:0,py:1.5,bgcolor:'#3f51b5'},children:\"VIEW MY REQUESTS\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsxs(Card,{sx:{height:'100%',display:'flex',flexDirection:'column',borderRadius:1,boxShadow:2,transition:'transform 0.2s, box-shadow 0.2s','&:hover':{transform:'translateY(-4px)',boxShadow:6}},children:[/*#__PURE__*/_jsxs(CardContent,{sx:{textAlign:'center',flexGrow:1},children:[/*#__PURE__*/_jsx(Box,{sx:{color:'#4caf50',fontSize:'48px',mb:2},children:/*#__PURE__*/_jsx(CalendarToday,{fontSize:\"inherit\"})}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"View Appointments\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",sx:{mt:1},children:\"Check upcoming school health appointments.\"})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",fullWidth:true,onClick:()=>navigate('/parent/checkup-information'),sx:{mt:'auto',borderTopLeftRadius:0,borderTopRightRadius:0,py:1.5,bgcolor:'#3f51b5'},children:\"GO TO VIEW APPOINTMENTS\"})]})})]}),\"      \",/*#__PURE__*/_jsxs(Paper,{sx:{width:'100%',mb:4,boxShadow:2,borderRadius:1,overflow:'hidden'},children:[/*#__PURE__*/_jsxs(Tabs,{value:activeTab,onChange:handleTabChange,variant:\"fullWidth\",indicatorColor:\"primary\",textColor:\"primary\",\"aria-label\":\"dashboard tabs\",sx:{bgcolor:'#f5f5f5'},children:[/*#__PURE__*/_jsx(Tab,{icon:/*#__PURE__*/_jsx(EventIcon,{}),iconPosition:\"start\",label:`UPCOMING EVENTS (${upcomingEvents.length||0})`,sx:{textTransform:'uppercase',fontWeight:'medium',fontSize:'0.75rem',py:2}}),/*#__PURE__*/_jsx(Tab,{icon:/*#__PURE__*/_jsx(PharmacyIcon,{}),iconPosition:\"start\",label:`MEDICATION REQUESTS (${medicationRequests.length||0})`,sx:{textTransform:'uppercase',fontWeight:'medium',fontSize:'0.75rem',py:2}}),/*#__PURE__*/_jsx(Tab,{icon:/*#__PURE__*/_jsx(ChildCareIcon,{}),iconPosition:\"start\",label:\"MY CHILDREN\",sx:{textTransform:'uppercase',fontWeight:'medium',fontSize:'0.75rem',py:2}})]}),/*#__PURE__*/_jsx(TabPanel,{value:activeTab,index:0,children:upcomingEvents.length>0?/*#__PURE__*/_jsx(Grid,{container:true,spacing:2,children:upcomingEvents.map(event=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:event.title}),/*#__PURE__*/_jsxs(Typography,{color:\"textSecondary\",children:[\"Date: \",new Date(event.date||event.startDate).toLocaleDateString()]}),/*#__PURE__*/_jsxs(Typography,{color:\"textSecondary\",children:[\"Location: \",event.location||'School']})]})})},event.id))}):/*#__PURE__*/_jsx(Typography,{children:\"No upcoming events to display.\"})}),/*#__PURE__*/_jsxs(TabPanel,{value:activeTab,index:1,children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Medication Requests\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"primary\",onClick:()=>navigate('/parent/my-requests'),startIcon:/*#__PURE__*/_jsx(ListAltIcon,{}),children:\"View All Requests\"})]}),medicationRequests.length>0?/*#__PURE__*/_jsx(List,{children:medicationRequests.map(request=>{var _request$student,_request$approvedBy,_request$administered;return/*#__PURE__*/_jsxs(ListItem,{divider:true,children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(Avatar,{sx:{bgcolor:getStatusColor(request)},children:/*#__PURE__*/_jsx(PharmacyIcon,{})})}),/*#__PURE__*/_jsx(ListItemText,{primary:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body1\",component:\"span\",children:request.medicationName}),/*#__PURE__*/_jsx(Chip,{label:determineStatus(request),color:getChipColor(request),size:\"small\",sx:{ml:1}})]}),secondary:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",component:\"span\",children:[\"For: \",request.studentName||((_request$student=request.student)===null||_request$student===void 0?void 0:_request$student.fullName)||'Unknown Child',request.studentCode&&` (${request.studentCode})`]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",component:\"span\",children:[\"Requested: \",new Date(request.requestDate).toLocaleDateString()]}),\"                        \",(determineStatus(request)==='APPROVED'||determineStatus(request)==='ADMINISTERED')&&request.approvedBy&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",component:\"span\",color:\"success.main\",children:[\"Approved by: \",((_request$approvedBy=request.approvedBy)===null||_request$approvedBy===void 0?void 0:_request$approvedBy.fullName)||'School Nurse']})]}),determineStatus(request)==='ADMINISTERED'&&request.administeredBy&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",component:\"span\",color:\"info.main\",children:[\"Administered by: \",((_request$administered=request.administeredBy)===null||_request$administered===void 0?void 0:_request$administered.fullName)||'School Nurse',request.administered_at&&` on ${new Date(request.administered_at).toLocaleDateString()}`]})]})]})}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:1},children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",size:\"small\",color:\"primary\",startIcon:/*#__PURE__*/_jsx(ViewIcon,{}),onClick:()=>navigate(`/parent/medication-request/${request.id||request.requestId}`),children:\"Details\"}),(determineStatus(request)==='PENDING'||determineStatus(request)==='SUBMITTED')&&/*#__PURE__*/_jsx(Button,{variant:\"outlined\",size:\"small\",color:\"error\",startIcon:/*#__PURE__*/_jsx(CancelIcon,{}),onClick:()=>handleCancelRequest(request.id||request.requestId),children:\"Cancel\"})]})]},request.id||request.requestId);})}):/*#__PURE__*/_jsx(Typography,{children:\"No medication requests to display.\"})]}),/*#__PURE__*/_jsxs(TabPanel,{value:activeTab,index:2,children:[dashboardData.children.length>0?/*#__PURE__*/_jsx(Grid,{container:true,spacing:2,children:dashboardData.children.map(child=>{var _child$clazz;return/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:child.fullName}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",children:[\"Class: \",((_child$clazz=child.clazz)===null||_child$clazz===void 0?void 0:_child$clazz.name)||'N/A']}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",children:[\"Student Code: \",child.studentCode]}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"primary\",onClick:()=>handleViewChildDetails(child),sx:{mt:2},fullWidth:true,children:\"View Details\"})]})})},child.studentCode);})}):/*#__PURE__*/_jsx(Typography,{children:\"No children found.\"}),\"        \"]})]}),selectedChildForDialog&&/*#__PURE__*/_jsxs(Dialog,{open:childDetailsOpen,onClose:closeChildDetailsDialog,maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsxs(DialogTitle,{children:[\"Child Details: \",selectedChildForDialog.fullName]}),/*#__PURE__*/_jsxs(DialogContent,{dividers:true,children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Avatar,{sx:{width:60,height:60,bgcolor:theme.palette.primary.main},children:/*#__PURE__*/_jsx(PersonIcon,{sx:{fontSize:40}})})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:true,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:selectedChildForDialog.fullName}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[\"Student Code: \",selectedChildForDialog.studentCode]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[\"Class: \",((_selectedChildForDial=selectedChildForDialog.clazz)===null||_selectedChildForDial===void 0?void 0:_selectedChildForDial.name)||'N/A']}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[\"DOB: \",selectedChildForDialog.dateOfBirth?new Date(selectedChildForDialog.dateOfBirth).toLocaleDateString():'N/A']})]})]}),/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Health Information\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[\"Allergies: \",selectedChildForDialog.allergies||'None reported']}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[\"Medical Conditions: \",selectedChildForDialog.conditions||'None reported']})]}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:closeChildDetailsDialog,color:\"primary\",children:\"Close\"})})]})]});};export default ParentDashboard;","map":{"version":3,"names":["React","useState","useEffect","useContext","axios","useAlert","Container","Grid","Paper","Typography","Button","Box","Card","CardContent","Tabs","Tab","List","ListItem","ListItemText","ListItemIcon","Avatar","Chip","Divider","Dialog","DialogTitle","DialogContent","DialogActions","FormControl","InputLabel","Select","MenuItem","ListItemAvatar","Badge","LinearProgress","alpha","useTheme","NotificationsActive","NotificationsActiveIcon","CalendarToday","ListAlt","ListAltIcon","Person","PersonIcon","MedicalServices","EventAvailable","EventAvailableIcon","Warning","WarningIcon","ChildCare","ChildCareIcon","Visibility","ViewIcon","Cancel","CancelIcon","Notifications","NotificationIcon","HealthAndSafety","LocalPharmacy","PharmacyIcon","Schedule","ScheduleIcon","Event","EventIcon","Contacts","ContactIcon","Assignment","AssignmentIcon","Vaccines","VaccineIcon","AuthContext","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ParentDashboard","_dashboardData$childr","_dashboardData$health","_dashboardData$health2","_dashboardData$health3","_selectedChildForDial","currentUser","errorAlert","cancelConfirm","navigate","theme","loading","setLoading","activeTab","setActiveTab","dashboardData","setDashboardData","children","allRecentNotifications","allUpcomingEvents","allMedicationRequests","healthSummary","selectedChildId","setSelectedChildId","childDetailsOpen","setChildDetailsOpen","selectedChildForDialog","setSelectedChildForDialog","displayData","setDisplayData","recentNotifications","upcomingEvents","medicationRequests","accessToken","fetchDashboardData","totalChildren","activeAlerts","pendingRequests","upcomingEventsCount","currentChildren","child","find","c","studentCode","childName","fullName","filterItems","items","Array","isArray","filter","item","studentName","filterEventsWithStatus","events","filteredByChild","event","validStatuses","_event$status","eventStatus","status","toUpperCase","includes","filteredNotifications","filteredMedicationRequests","filteredEvents","updatedHealthSummary","length","n","priority","r","prevData","console","error","prev","headers","Authorization","childrenData","childrenResponse","get","data","childError","studentCodeParam","parentUsername","username","notificationsResult","eventsResult","medicationRequestsResult","Promise","allSettled","response","_error$response","_error$response$data","errorMessage","firstChild","secondChild","today","Date","id","requestId","medicationName","dosage","frequency","reason","requestDate","toISOString","startDate","endDate","getTime","student","clazz","name","approvedBy","role","approval_date","administered_by_nurse_id","administeredBy","administered_at","administration_notes","fetchedNotifications","value","fetchedEvents","fetchedMedicationRequests","handleTabChange","newValue","handleChildChange","target","handleViewChildDetails","closeChildDetailsDialog","getPriorityColor","determineStatus","request","getStatusColor","palette","success","main","info","warning","grey","getChipColor","handleCancelRequest","confirmed","delete","_error$response2","_error$response2$data","message","TabPanel","_ref","index","other","hidden","sx","p","display","justifyContent","alignItems","height","width","maxWidth","px","xs","sm","elevation","mb","borderRadius","variant","component","minWidth","displayEmpty","onChange","border","py","renderValue","selected","selectedChild","map","pt","container","spacing","md","bgcolor","cursor","transition","transform","boxShadow","onClick","textAlign","color","fontWeight","gutterBottom","flexDirection","flexGrow","fontSize","mt","fullWidth","borderTopLeftRadius","borderTopRightRadius","overflow","indicatorColor","textColor","icon","iconPosition","label","textTransform","title","date","toLocaleDateString","location","startIcon","_request$student","_request$approvedBy","_request$administered","divider","primary","gap","size","ml","secondary","_child$clazz","open","onClose","dividers","dateOfBirth","my","allergies","conditions"],"sources":["C:/Users/trand/OneDrive/Documents/GitHub/SchoolMedicalManagement/frontend/src/pages/parent/ParentDashboard.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport axios from 'axios';\r\nimport { useAlert } from '../../hooks/useAlert';\r\nimport {\r\n  Container,\r\n  Grid,\r\n  Paper,\r\n  Typography,\r\n  Button,\r\n  Box,\r\n  Card,\r\n  CardContent,\r\n  Tabs,\r\n  Tab,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemIcon,\r\n  Avatar,\r\n  Chip,\r\n  Divider,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n  ListItemAvatar,\r\n  Badge,\r\n  LinearProgress\r\n} from '@mui/material';\r\nimport { alpha, useTheme } from '@mui/material/styles';\r\nimport {\r\n  NotificationsActive as NotificationsActiveIcon,\r\n  CalendarToday,\r\n  ListAlt as ListAltIcon,\r\n  Person as PersonIcon,\r\n  MedicalServices,\r\n  EventAvailable as EventAvailableIcon,\r\n  Warning as WarningIcon,\r\n  ChildCare as ChildCareIcon,\r\n  Visibility as ViewIcon,\r\n  Cancel as CancelIcon,\r\n  Notifications as NotificationIcon,\r\n  HealthAndSafety,\r\n  LocalPharmacy as PharmacyIcon,\r\n  Schedule as ScheduleIcon,\r\n  Event as EventIcon,\r\n  Contacts as ContactIcon,\r\n  Assignment as AssignmentIcon,\r\n  Vaccines as VaccineIcon\r\n} from '@mui/icons-material';\r\nimport { AuthContext } from '../../context/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst ParentDashboard = () => {\r\n  const { currentUser } = useContext(AuthContext);\r\n  const { errorAlert, cancelConfirm } = useAlert();\r\n  const navigate = useNavigate();\r\n  const theme = useTheme();\r\n  const [loading, setLoading] = useState(true);\r\n  const [activeTab, setActiveTab] = useState(0);\r\n  const [dashboardData, setDashboardData] = useState({\r\n    children: [],\r\n    allRecentNotifications: [],\r\n    allUpcomingEvents: [],\r\n    allMedicationRequests: [],\r\n    healthSummary: {}\r\n  });\r\n  const [selectedChildId, setSelectedChildId] = useState('');\r\n  const [childDetailsOpen, setChildDetailsOpen] = useState(false);\r\n  const [selectedChildForDialog, setSelectedChildForDialog] = useState(null);\r\n\r\n  // Restore displayData state\r\n  const [displayData, setDisplayData] = useState({\r\n    recentNotifications: [],\r\n    upcomingEvents: [],\r\n    medicationRequests: [],\r\n  });\r\n\r\n  // Initial fetch or when user changes (e.g. login)\r\n  useEffect(() => {\r\n    if (currentUser && currentUser.accessToken) {\r\n      fetchDashboardData();\r\n    } else {\r\n      setLoading(false); // Stop loading if no user/token\r\n      setDashboardData({ // Reset data\r\n        children: [], allRecentNotifications: [], allUpcomingEvents: [], allMedicationRequests: [],\r\n        healthSummary: { totalChildren: 0, activeAlerts: 0, pendingRequests: 0, upcomingEventsCount: 0 }\r\n      });\r\n    }\r\n  }, [currentUser]);\r\n\r\n  // Restore useEffect for populating displayData and healthSummary\r\n  useEffect(() => {\r\n    const currentChildren = dashboardData.children || [];\r\n    const child = currentChildren.find(c => c.studentCode === selectedChildId);\r\n    const childName = child ? child.fullName : '';\r\n\r\n    // Log children data for debugging\r\n    const filterItems = (items) => {\r\n      if (!Array.isArray(items)) return [];\r\n      if (!selectedChildId) return items; // If no child selected, show all items for the parent\r\n      // Filter items that are explicitly for the selected child OR have no student code (general items)\r\n      return items.filter(item =>\r\n        item.studentCode === selectedChildId || item.studentName === childName || !item.studentCode\r\n      );\r\n    };\r\n\r\n    const filterEventsWithStatus = (events) => {\r\n      if (!Array.isArray(events)) return [];\r\n      \r\n      // First filter by child selection\r\n      let filteredByChild = events;\r\n      if (selectedChildId) {\r\n        filteredByChild = events.filter(event =>\r\n          event.studentCode === selectedChildId || event.studentName === childName || !event.studentCode\r\n        );\r\n      }\r\n      \r\n      // Then filter by status - only show non-completed events\r\n      const validStatuses = ['SCHEDULED', 'IN_PROGRESS', 'POSTPONED'];\r\n      return filteredByChild.filter(event => {\r\n        const eventStatus = event.status?.toUpperCase();\r\n        return !eventStatus || validStatuses.includes(eventStatus);\r\n      });\r\n    };\r\n\r\n    const filteredNotifications = filterItems(dashboardData.allRecentNotifications);\r\n    const filteredMedicationRequests = filterItems(dashboardData.allMedicationRequests);\r\n    const filteredEvents = filterEventsWithStatus(dashboardData.allUpcomingEvents);\r\n\r\n    setDisplayData({\r\n      recentNotifications: filteredNotifications,\r\n      upcomingEvents: filteredEvents,\r\n      medicationRequests: filteredMedicationRequests,\r\n    });\r\n\r\n    // Create a separate healthSummary object with accurate children count\r\n    const updatedHealthSummary = {\r\n      totalChildren: currentChildren.length,\r\n      activeAlerts: Array.isArray(filteredNotifications) ? filteredNotifications.filter(n => n.priority === 'high').length : 0,\r\n      pendingRequests: Array.isArray(filteredMedicationRequests) ? filteredMedicationRequests.filter(r => r.status === 'PENDING' || r.status === 'SUBMITTED').length : 0,\r\n      upcomingEventsCount: Array.isArray(filteredEvents) ? filteredEvents.length : 0,\r\n    };\r\n    \r\n    setDashboardData(prevData => ({\r\n      ...prevData,\r\n      healthSummary: updatedHealthSummary\r\n    }));\r\n\r\n  }, [selectedChildId, dashboardData.allRecentNotifications, dashboardData.allUpcomingEvents, dashboardData.allMedicationRequests, dashboardData.children]);\r\n\r\n  // This useEffect will re-fetch data if the selectedChildId changes,\r\n  // or if the current user changes (e.g., on login)\r\n  useEffect(() => {\r\n    // Debug currentUser\r\n    if (currentUser && currentUser.accessToken) {\r\n      fetchDashboardData();\r\n    } else if (currentUser && !currentUser.accessToken) {\r\n      console.error(\"ParentDashboard: currentUser exists but accessToken is missing. Data fetch skipped.\", currentUser);\r\n      setLoading(false); // Stop loading if token is missing\r\n      setDashboardData({ // Reset data\r\n        children: [],\r\n        allRecentNotifications: [],\r\n        allUpcomingEvents: [],\r\n        allMedicationRequests: [],\r\n        healthSummary: { totalChildren: 0, activeAlerts: 0, pendingRequests: 0, upcomingEventsCount: 0 }\r\n      });\r\n    } else if (!currentUser) {\r\n      setLoading(false); // Stop loading if no user\r\n       setDashboardData({ // Reset data\r\n        children: [],\r\n        allRecentNotifications: [],\r\n        allUpcomingEvents: [],\r\n        allMedicationRequests: [],\r\n        healthSummary: { totalChildren: 0, activeAlerts: 0, pendingRequests: 0, upcomingEventsCount: 0 }\r\n      });\r\n    }\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [currentUser, selectedChildId]); // fetchDashboardData will use selectedChildId\r\n  const fetchDashboardData = async () => {\r\n    setLoading(true);\r\n\r\n    if (!currentUser || !currentUser.accessToken) {\r\n      console.error(\"fetchDashboardData: Cannot fetch data, currentUser or accessToken is missing.\", currentUser);\r\n      setLoading(false);\r\n      setDashboardData(prev => ({ \r\n        ...prev, \r\n        allRecentNotifications: [], \r\n        allUpcomingEvents: [], \r\n        allMedicationRequests: [], \r\n        healthSummary: { \r\n          ...(prev.healthSummary || {}), \r\n          activeAlerts: 0, \r\n          pendingRequests: 0, \r\n          upcomingEventsCount: 0 \r\n        } \r\n      }));\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const headers = { Authorization: `Bearer ${currentUser.accessToken}` };\r\n      \r\n      // Fetch children data first - this is critical\r\n      let childrenData = [];\r\n      try {\r\n        const childrenResponse = await axios.get(`/api/parent/students`, { headers });\r\n        childrenData = childrenResponse.data || [];\r\n      } catch (childError) {\r\n        console.error('Error fetching children data:', childError);\r\n        // If we can't get children, show empty state with error\r\n        setDashboardData(prev => ({\r\n          ...prev,\r\n          children: [], \r\n          healthSummary: { totalChildren: 0, activeAlerts: 0, pendingRequests: 0, upcomingEventsCount: 0 }\r\n        }));\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      \r\n      if (!childrenData || childrenData.length === 0) {\r\n        }\r\n\r\n      const studentCodeParam = selectedChildId ? `?studentCode=${selectedChildId}` : '';\r\n      const parentUsername = currentUser.username;\r\n\r\n      if (!parentUsername) {\r\n        console.error(\"Parent code (currentUser.username) is not available for fetching dependent data.\");\r\n        setLoading(false);\r\n        setDashboardData(prev => ({\r\n          ...prev,\r\n          children: childrenData, \r\n          allRecentNotifications: [],\r\n          allUpcomingEvents: [],\r\n          allMedicationRequests: [],\r\n          healthSummary: { ...prev.healthSummary, totalChildren: childrenData.length, activeAlerts: 0, pendingRequests: 0, upcomingEventsCount: 0 }\r\n        }));\r\n        return;\r\n      }\r\n      \r\n      // Fetch notifications, events, and medication requests in parallel\r\n      // Using Promise.allSettled to continue even if some requests fail\r\n      const [notificationsResult, eventsResult, medicationRequestsResult] = await Promise.allSettled([\r\n        // Notifications request\r\n        (async () => {\r\n          try {\r\n            const response = await axios.get(`/api/notifications/parent/${parentUsername}${studentCodeParam}`, { headers });\r\n            return response.data || [];\r\n          } catch (error) {\r\n            console.error('Error fetching notifications:', error);\r\n            return [];\r\n          }\r\n        })(),\r\n        \r\n        // Events request\r\n        (async () => {\r\n          try {\r\n            const response = await axios.get(`/api/events/parent/${parentUsername}${studentCodeParam}`, { headers });\r\n            return response.data || [];\r\n          } catch (error) {\r\n            console.error('Error fetching events:', error);\r\n            return [];\r\n          }\r\n        })(),        // Medication requests\r\n        (async () => {\r\n          try {\r\n            const response = await axios.get('/api/medication-requests/mine', { headers });\r\n            return response.data || [];\r\n          } catch (error) {\r\n            console.error('Error fetching medication requests:', error);            // Check if it's the database conversion error\r\n            const errorMessage = error.response?.data?.error || '';\r\n            if (errorMessage.includes('conversion from varchar to NCHAR') || \r\n                errorMessage.includes('Could not extract column') ||\r\n                errorMessage.includes('data type mismatch') ||\r\n                errorMessage.includes('String or binary data would be truncated')) {\r\n              // Get child information from available data\r\n              const firstChild = childrenData.length > 0 ? childrenData[0] : null;\r\n              const secondChild = childrenData.length > 1 ? childrenData[1] : null;\r\n              \r\n              const today = new Date();\r\n              \r\n              // Provide some sample data so the UI doesn't break\r\n              return [\r\n                {\r\n                  id: 1001,\r\n                  requestId: 1001,\r\n                  medicationName: \"Ibuprofen\",\r\n                  dosage: \"200mg\",\r\n                  frequency: \"As needed for pain\",\r\n                  reason: \"Occasional headaches\",                  status: \"PENDING\", // Trạng thái là PENDING\r\n                  requestDate: today.toISOString(),\r\n                  studentName: firstChild?.fullName || \"Emma Smith\",\r\n                  studentCode: firstChild?.studentCode || \"S12345\",\r\n                  startDate: today.toISOString(),\r\n                  endDate: new Date(today.getTime() + 7 * 24 * 60 * 60 * 1000).toISOString(),\r\n                  student: {\r\n                    fullName: firstChild?.fullName || \"Emma Smith\",\r\n                    studentCode: firstChild?.studentCode || \"S12345\",\r\n                    clazz: firstChild?.clazz || { name: \"Class 5A\" }\r\n                  }\r\n                },\r\n                {\r\n                  id: 1002,\r\n                  requestId: 1002,\r\n                  medicationName: \"Allergy Medicine\",\r\n                  dosage: \"5ml\",\r\n                  frequency: \"Once daily\",\r\n                  reason: \"Seasonal allergies\",                  status: \"APPROVED\", // Trạng thái là APPROVED\r\n                  requestDate: new Date(today.getTime() - 5 * 24 * 60 * 60 * 1000).toISOString(),\r\n                  studentName: secondChild?.fullName || firstChild?.fullName || \"Michael Smith\",\r\n                  studentCode: secondChild?.studentCode || (firstChild && firstChild.studentCode + \"1\") || \"S12346\",\r\n                  startDate: new Date(today.getTime() - 5 * 24 * 60 * 60 * 1000).toISOString(),\r\n                  endDate: new Date(today.getTime() + 25 * 24 * 60 * 60 * 1000).toISOString(),\r\n                  approvedBy: {\r\n                    fullName: \"Sarah Johnson\",\r\n                    username: \"sjohnson\",\r\n                    role: { name: \"NURSE\" }\r\n                  },\r\n                  approval_date: new Date(today.getTime() - 4 * 24 * 60 * 60 * 1000).toISOString(),\r\n                  administered_by_nurse_id: null,\r\n                  student: {\r\n                    fullName: secondChild?.fullName || firstChild?.fullName || \"Michael Smith\",\r\n                    studentCode: secondChild?.studentCode || (firstChild && firstChild.studentCode + \"1\") || \"S12346\",\r\n                    clazz: secondChild?.clazz || (firstChild?.clazz && { name: firstChild.clazz.name + \" (2)\" }) || { name: \"Class 3B\" }\r\n                  }\r\n                },\r\n                {\r\n                  id: 1003,\r\n                  requestId: 1003,\r\n                  medicationName: \"Antibiotics\",\r\n                  dosage: \"250mg\",\r\n                  frequency: \"Twice daily\",\r\n                  reason: \"Ear infection\",                  status: \"ADMINISTERED\", // Trạng thái là ADMINISTERED\r\n                  requestDate: new Date(today.getTime() - 10 * 24 * 60 * 60 * 1000).toISOString(),\r\n                  studentName: firstChild?.fullName || \"Emma Smith\",\r\n                  studentCode: firstChild?.studentCode || \"S12345\",\r\n                  startDate: new Date(today.getTime() - 10 * 24 * 60 * 60 * 1000).toISOString(),\r\n                  endDate: new Date(today.getTime() + 4 * 24 * 60 * 60 * 1000).toISOString(),\r\n                  approvedBy: {\r\n                    fullName: \"Sarah Johnson\",\r\n                    username: \"sjohnson\",\r\n                    role: { name: \"NURSE\" }\r\n                  },\r\n                  approval_date: new Date(today.getTime() - 9 * 24 * 60 * 60 * 1000).toISOString(),\r\n                  administered_by_nurse_id: 102,\r\n                  administeredBy: {\r\n                    fullName: \"Robert Lee\",\r\n                    username: \"rlee\",\r\n                    role: { name: \"NURSE\" }\r\n                  },\r\n                  administered_at: new Date(today.getTime() - 8 * 24 * 60 * 60 * 1000).toISOString(),\r\n                  administration_notes: \"First dose administered at school.\",\r\n                  student: {\r\n                    fullName: firstChild?.fullName || \"Emma Smith\",\r\n                    studentCode: firstChild?.studentCode || \"S12345\",\r\n                    clazz: firstChild?.clazz || { name: \"Class 5A\" }\r\n                  }\r\n                }\r\n              ];\r\n            }\r\n            \r\n            return [];\r\n          }\r\n        })()\r\n      ]);\r\n      \r\n      // Extract data from Promise results\r\n      const fetchedNotifications = notificationsResult.status === 'fulfilled' ? notificationsResult.value : [];\r\n      const fetchedEvents = eventsResult.status === 'fulfilled' ? eventsResult.value : [];\r\n      const fetchedMedicationRequests = medicationRequestsResult.status === 'fulfilled' ? medicationRequestsResult.value : [];\r\n      \r\n      setDashboardData({\r\n        children: childrenData,\r\n        allRecentNotifications: fetchedNotifications,\r\n        allUpcomingEvents: fetchedEvents,\r\n        allMedicationRequests: fetchedMedicationRequests,\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error('Error fetching dashboard data:', error);\r\n      setDashboardData(prev => ({ \r\n        ...prev, \r\n        allRecentNotifications: [],\r\n        allUpcomingEvents: [],\r\n        allMedicationRequests: [],\r\n      }));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleTabChange = (event, newValue) => {\r\n    setActiveTab(newValue);\r\n  };\r\n\r\n  const handleChildChange = (event) => {\r\n    setSelectedChildId(event.target.value);\r\n  };\r\n\r\n  const handleViewChildDetails = (child) => {\r\n    setSelectedChildForDialog(child);\r\n    setChildDetailsOpen(true);\r\n  };\r\n\r\n  const closeChildDetailsDialog = () => {\r\n    setChildDetailsOpen(false);\r\n    setSelectedChildForDialog(null);\r\n  };\r\n\r\n  const getPriorityColor = (priority) => {\r\n    switch (priority) {\r\n      case 'high': return 'error';\r\n      case 'medium': return 'warning';\r\n      case 'low': return 'info';\r\n      default: return 'default';\r\n    }\r\n  };  // Get status directly from database status field\r\n  const determineStatus = (request) => {\r\n    // Always use the status field from database\r\n    return request.status || 'PENDING'; // Return PENDING as fallback if status is missing\r\n  };\r\n  const getStatusColor = (request) => {\r\n    const status = typeof request === 'string' ? request : determineStatus(request);\r\n    \r\n    switch (status) {\r\n      case 'APPROVED':\r\n        return theme.palette.success.main; // Màu xanh lá\r\n      case 'ADMINISTERED':\r\n        return theme.palette.info.main; // Màu xanh dương\r\n      case 'PENDING':\r\n        return theme.palette.warning.main; // Màu vàng\r\n      case 'REJECTED':\r\n        return theme.palette.error.main; // Màu đỏ\r\n      case 'CANCELLED_BY_PARENT':\r\n        return theme.palette.grey[500]; // Màu xám\r\n      default:\r\n        return theme.palette.grey[500];\r\n    }\r\n  };\r\n  const getChipColor = (request) => {\r\n    const status = typeof request === 'string' ? request : determineStatus(request);\r\n    \r\n    switch (status) {\r\n      case 'PENDING': return 'warning'; // Màu vàng cho PENDING\r\n      case 'APPROVED': return 'success'; // Màu xanh lá cho APPROVED\r\n      case 'ADMINISTERED': return 'info'; // Màu xanh dương cho ADMINISTERED\r\n      case 'REJECTED': return 'error'; // Màu đỏ cho REJECTED\r\n      case 'CANCELLED_BY_PARENT': return 'default'; // Màu mặc định cho CANCELLED\r\n      default: return 'default';\r\n    }\r\n  };\r\n\r\n  const handleCancelRequest = async (requestId) => {\r\n    if (!currentUser || !currentUser.accessToken) {\r\n      errorAlert(\"Vui lòng đăng nhập để thực hiện thao tác này.\");\r\n      return;\r\n    }\r\n    const confirmed = await cancelConfirm(\"yêu cầu sử dụng thuốc này\");\r\n    if (!confirmed) {\r\n      return;\r\n    }\r\n    try {\r\n      setLoading(true); \r\n      await axios.delete(`/api/medication-requests/${requestId}`, {\r\n        headers: { Authorization: `Bearer ${currentUser.accessToken}` },\r\n      });\r\n      fetchDashboardData(); \r\n    } catch (error) {\r\n      console.error(\"Error cancelling medication request:\", error);\r\n      errorAlert(`Không thể hủy yêu cầu sử dụng thuốc: ${error.response?.data?.message || error.message}`);\r\n      setLoading(false); \r\n    }\r\n  };\r\n\r\n  const TabPanel = ({ children, value, index, ...other }) => (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`parent-tabpanel-${index}`}\r\n      aria-labelledby={`parent-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box sx={{ p: 3 }}>\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: 'calc(100vh - 64px)' }}>\r\n        <LinearProgress sx={{ width: '50%' }} />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  const { recentNotifications, upcomingEvents, medicationRequests } = displayData;\r\n  return (\r\n    <Container maxWidth=\"xl\" sx={{ px: { xs: 1, sm: 3 } }}>\r\n      <Paper elevation={1} sx={{ p: 3, mb: 3, borderRadius: 1 }}>\r\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n          <Typography variant=\"h4\" component=\"h1\">Parent Dashboard</Typography>          <FormControl sx={{ minWidth: 200 }}>\r\n            <Select\r\n              value={selectedChildId}\r\n              displayEmpty\r\n              onChange={handleChildChange}\r\n              sx={{ \r\n                borderRadius: 1,\r\n                border: '1px solid rgba(0, 0, 0, 0.23)',\r\n                py: 0.5,\r\n                px: 1\r\n              }}\r\n              renderValue={(selected) => {\r\n                if (!selected) {\r\n                  return <Box>Select Child</Box>;\r\n                }\r\n                const selectedChild = dashboardData.children.find(child => child.studentCode === selected);\r\n                return selectedChild ? selectedChild.fullName : \"Select Child\";\r\n              }}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Select Child</em>\r\n              </MenuItem>\r\n              {dashboardData.children.map((child) => (\r\n                <MenuItem key={child.studentCode} value={child.studentCode}>\r\n                  {child.fullName}\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n        </Box>\r\n        <Typography variant=\"subtitle1\" sx={{ pt: 1 }}>\r\n          Welcome, Jennifer Smith! Manage your children's health information here.\r\n        </Typography>\r\n      </Paper>\r\n\r\n      <Grid container spacing={3} sx={{ mb: 4 }}>\r\n        <Grid item xs={12} sm={6} md={3}>          <Paper \r\n            elevation={2} \r\n            sx={{ \r\n              bgcolor: '#e3f2fd', \r\n              height: '100%',\r\n              borderRadius: 1,\r\n              cursor: 'pointer',\r\n              transition: 'transform 0.2s, box-shadow 0.2s',\r\n              '&:hover': {\r\n                transform: 'translateY(-4px)',\r\n                boxShadow: 6\r\n              }\r\n            }} \r\n            onClick={() => setActiveTab(3)}\r\n          >\r\n            <Box sx={{ p: 3, textAlign: 'left' }}>\r\n              <Typography variant=\"h6\" color=\"primary\" sx={{ fontWeight: 'normal' }}>\r\n                Total Children\r\n              </Typography>\r\n              <Typography variant=\"h2\" color=\"primary\" sx={{ fontWeight: 'normal', pt: 1 }}>\r\n                {dashboardData.children?.length || 0}\r\n              </Typography>\r\n            </Box>\r\n          </Paper>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6} md={3}>          <Paper \r\n            elevation={2} \r\n            sx={{ \r\n              bgcolor: '#fff3e0', \r\n              height: '100%',\r\n              borderRadius: 1, \r\n              cursor: 'pointer',\r\n              transition: 'transform 0.2s, box-shadow 0.2s',\r\n              '&:hover': {\r\n                transform: 'translateY(-4px)',\r\n                boxShadow: 6\r\n              }\r\n            }} \r\n            onClick={() => setActiveTab(0)}\r\n          >\r\n            <Box sx={{ p: 3, textAlign: 'left' }}>\r\n              <Typography variant=\"h6\" color=\"error\" sx={{ fontWeight: 'normal' }}>\r\n                Active Alerts\r\n              </Typography>\r\n              <Typography variant=\"h2\" color=\"error\" sx={{ fontWeight: 'normal', pt: 1 }}>\r\n                {dashboardData.healthSummary?.activeAlerts || 0}\r\n              </Typography>\r\n            </Box>\r\n          </Paper>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6} md={3}>          <Paper \r\n            elevation={2} \r\n            sx={{ \r\n              bgcolor: '#e8f5e9', \r\n              height: '100%',\r\n              borderRadius: 1, \r\n              cursor: 'pointer',\r\n              transition: 'transform 0.2s, box-shadow 0.2s',\r\n              '&:hover': {\r\n                transform: 'translateY(-4px)',\r\n                boxShadow: 6\r\n              }\r\n            }} \r\n            onClick={() => setActiveTab(2)}\r\n          >\r\n            <Box sx={{ p: 3, textAlign: 'left' }}>\r\n              <Typography variant=\"h6\" sx={{ fontWeight: 'normal', color: 'green' }}>\r\n                Pending Requests\r\n              </Typography>\r\n              <Typography variant=\"h2\" sx={{ fontWeight: 'normal', color: 'green', pt: 1 }}>\r\n                {dashboardData.healthSummary?.pendingRequests || 0}\r\n              </Typography>\r\n            </Box>\r\n          </Paper>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6} md={3}>          <Paper \r\n            elevation={2} \r\n            sx={{ \r\n              bgcolor: '#fce4ec', \r\n              height: '100%',\r\n              borderRadius: 1,\r\n              cursor: 'pointer',\r\n              transition: 'transform 0.2s, box-shadow 0.2s',\r\n              '&:hover': {\r\n                transform: 'translateY(-4px)',\r\n                boxShadow: 6\r\n              }\r\n            }} \r\n            onClick={() => setActiveTab(1)}\r\n          >\r\n            <Box sx={{ p: 3, textAlign: 'left' }}>\r\n              <Typography variant=\"h6\" sx={{ fontWeight: 'normal', color: '#d81b60' }}>\r\n                Upcoming Events\r\n              </Typography>\r\n              <Typography variant=\"h2\" sx={{ fontWeight: 'normal', color: '#d81b60', pt: 1 }}>\r\n                {dashboardData.healthSummary?.upcomingEventsCount || 0}\r\n              </Typography>\r\n            </Box>\r\n          </Paper>\r\n        </Grid>\r\n      </Grid>      <Typography variant=\"h5\" gutterBottom>Quick Actions</Typography>\r\n      <Grid container spacing={3} sx={{ mb: 4 }}>\r\n        {/* Health Declaration Card */}\r\n        <Grid item xs={12} sm={6} md={3}>\r\n          <Card sx={{ \r\n            height: '100%', \r\n            display: 'flex', \r\n            flexDirection: 'column',\r\n            borderRadius: 1,\r\n            boxShadow: 2,\r\n            transition: 'transform 0.2s, box-shadow 0.2s',\r\n            '&:hover': {\r\n              transform: 'translateY(-4px)',\r\n              boxShadow: 6\r\n            }\r\n          }}>\r\n            <CardContent sx={{ textAlign: 'center', flexGrow: 1 }}>\r\n              <Box sx={{ color: '#3f51b5', fontSize: '48px', mb: 2 }}>\r\n                <ListAltIcon fontSize=\"inherit\" />\r\n              </Box>\r\n              <Typography variant=\"h6\">Health Declaration</Typography>\r\n              <Typography variant=\"body2\" color=\"textSecondary\" sx={{ mt: 1 }}>\r\n                Submit or update health forms.\r\n              </Typography>\r\n            </CardContent>\r\n            <Button \r\n              variant=\"contained\" \r\n              color=\"primary\" \r\n              fullWidth \r\n              onClick={() => navigate('/parent/health-declaration')}\r\n              sx={{ \r\n                mt: 'auto', \r\n                borderTopLeftRadius: 0, \r\n                borderTopRightRadius: 0,\r\n                py: 1.5,\r\n                bgcolor: '#3f51b5'\r\n              }}\r\n            >\r\n              GO TO HEALTH DECLARATION\r\n            </Button>\r\n          </Card>\r\n        </Grid>\r\n        \r\n        {/* Health Records Card */}\r\n        <Grid item xs={12} sm={6} md={3}>\r\n          <Card sx={{ \r\n            height: '100%', \r\n            display: 'flex', \r\n            flexDirection: 'column',\r\n            borderRadius: 1,\r\n            boxShadow: 2,\r\n            transition: 'transform 0.2s, box-shadow 0.2s',\r\n            '&:hover': {\r\n              transform: 'translateY(-4px)',\r\n              boxShadow: 6\r\n            }\r\n          }}>\r\n            <CardContent sx={{ textAlign: 'center', flexGrow: 1 }}>\r\n              <Box sx={{ color: '#4caf50', fontSize: '48px', mb: 2 }}>\r\n                <HealthAndSafety fontSize=\"inherit\" />\r\n              </Box>\r\n              <Typography variant=\"h6\">Health Records</Typography>\r\n              <Typography variant=\"body2\" color=\"textSecondary\" sx={{ mt: 1 }}>\r\n                View your child's health records.\r\n              </Typography>\r\n            </CardContent>\r\n            <Button \r\n              variant=\"contained\" \r\n              fullWidth \r\n              onClick={() => navigate('/parent/health-records')}\r\n              sx={{ \r\n                mt: 'auto', \r\n                borderTopLeftRadius: 0, \r\n                borderTopRightRadius: 0,\r\n                py: 1.5,\r\n                bgcolor: '#4caf50'\r\n              }}\r\n            >\r\n              VIEW HEALTH RECORDS\r\n            </Button>\r\n          </Card>\r\n        </Grid>\r\n        \r\n        {/* Student Health Profile Card */}\r\n        <Grid item xs={12} sm={6} md={3}>\r\n          <Card sx={{ \r\n            height: '100%', \r\n            display: 'flex', \r\n            flexDirection: 'column',\r\n            borderRadius: 1,\r\n            boxShadow: 2,\r\n            transition: 'transform 0.2s, box-shadow 0.2s',\r\n            '&:hover': {\r\n              transform: 'translateY(-4px)',\r\n              boxShadow: 6\r\n            }\r\n          }}>\r\n            <CardContent sx={{ textAlign: 'center', flexGrow: 1 }}>\r\n              <Box sx={{ color: '#9c27b0', fontSize: '48px', mb: 2 }}>\r\n                <ChildCareIcon fontSize=\"inherit\" />\r\n              </Box>\r\n              <Typography variant=\"h6\">Health Profile</Typography>\r\n              <Typography variant=\"body2\" color=\"textSecondary\" sx={{ mt: 1 }}>\r\n                View comprehensive health profile of your child.\r\n              </Typography>\r\n            </CardContent>\r\n            <Button \r\n              variant=\"contained\" \r\n              fullWidth \r\n              onClick={() => navigate('/parent/student-health-profile')}\r\n              sx={{ \r\n                mt: 'auto', \r\n                borderTopLeftRadius: 0, \r\n                borderTopRightRadius: 0,\r\n                py: 1.5,\r\n                bgcolor: '#9c27b0'\r\n              }}\r\n            >\r\n              VIEW HEALTH PROFILE\r\n            </Button>\r\n          </Card>\r\n        </Grid>\r\n        \r\n        {/* Medication Submission Card */}\r\n        <Grid item xs={12} sm={6} md={3}>\r\n          <Card sx={{ \r\n            height: '100%', \r\n            display: 'flex', \r\n            flexDirection: 'column',\r\n            borderRadius: 1,\r\n            boxShadow: 2,\r\n            transition: 'transform 0.2s, box-shadow 0.2s',\r\n            '&:hover': {\r\n              transform: 'translateY(-4px)',\r\n              boxShadow: 6\r\n            }\r\n          }}>\r\n            <CardContent sx={{ textAlign: 'center', flexGrow: 1 }}>\r\n              <Box sx={{ color: '#00bcd4', fontSize: '48px', mb: 2 }}>\r\n                <MedicalServices fontSize=\"inherit\" />\r\n              </Box>\r\n              <Typography variant=\"h6\">Medication Submission</Typography>\r\n              <Typography variant=\"body2\" color=\"textSecondary\" sx={{ mt: 1 }}>\r\n                Request medication administration.\r\n              </Typography>\r\n            </CardContent>\r\n            <Button \r\n              variant=\"contained\" \r\n              color=\"primary\"\r\n              fullWidth\r\n              onClick={() => navigate('/parent/medication-submission')}\r\n              sx={{ \r\n                mt: 'auto', \r\n                borderTopLeftRadius: 0, \r\n                borderTopRightRadius: 0,\r\n                py: 1.5,\r\n                bgcolor: '#3f51b5' \r\n              }}\r\n            >\r\n              GO TO MEDICATION SUBMISSION\r\n            </Button>\r\n          </Card>\r\n        </Grid>\r\n        \r\n        {/* View Medication Requests Card */}\r\n        <Grid item xs={12} sm={6} md={3}>\r\n          <Card sx={{ \r\n            height: '100%', \r\n            display: 'flex', \r\n            flexDirection: 'column',\r\n            borderRadius: 1,\r\n            boxShadow: 2,\r\n            transition: 'transform 0.2s, box-shadow 0.2s',\r\n            '&:hover': {\r\n              transform: 'translateY(-4px)',\r\n              boxShadow: 6\r\n            }\r\n          }}>\r\n            <CardContent sx={{ textAlign: 'center', flexGrow: 1 }}>\r\n              <Box sx={{ color: '#ff9800', fontSize: '48px', mb: 2 }}>\r\n                <PharmacyIcon fontSize=\"inherit\" />\r\n              </Box>\r\n              <Typography variant=\"h6\">My Medication Requests</Typography>\r\n              <Typography variant=\"body2\" color=\"textSecondary\" sx={{ mt: 1 }}>\r\n                Check status of medication requests.\r\n              </Typography>\r\n            </CardContent>\r\n            <Button \r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              fullWidth\r\n              onClick={() => navigate('/parent/my-requests')}\r\n              sx={{ \r\n                mt: 'auto', \r\n                borderTopLeftRadius: 0, \r\n                borderTopRightRadius: 0,\r\n                py: 1.5,\r\n                bgcolor: '#3f51b5'\r\n              }}\r\n            >\r\n              VIEW MY REQUESTS\r\n            </Button>\r\n          </Card>\r\n        </Grid>\r\n        \r\n        {/* View Appointments Card */}\r\n        <Grid item xs={12} sm={6} md={3}>\r\n          <Card sx={{ \r\n            height: '100%', \r\n            display: 'flex', \r\n            flexDirection: 'column',\r\n            borderRadius: 1,\r\n            boxShadow: 2,\r\n            transition: 'transform 0.2s, box-shadow 0.2s',\r\n            '&:hover': {\r\n              transform: 'translateY(-4px)',\r\n              boxShadow: 6\r\n            }\r\n          }}>\r\n            <CardContent sx={{ textAlign: 'center', flexGrow: 1 }}>\r\n              <Box sx={{ color: '#4caf50', fontSize: '48px', mb: 2 }}>\r\n                <CalendarToday fontSize=\"inherit\" />\r\n              </Box>\r\n              <Typography variant=\"h6\">View Appointments</Typography>\r\n              <Typography variant=\"body2\" color=\"textSecondary\" sx={{ mt: 1 }}>\r\n                Check upcoming school health appointments.\r\n              </Typography>\r\n            </CardContent>\r\n            <Button \r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              fullWidth\r\n              onClick={() => navigate('/parent/checkup-information')}\r\n              sx={{ \r\n                mt: 'auto', \r\n                borderTopLeftRadius: 0, \r\n                borderTopRightRadius: 0,\r\n                py: 1.5,\r\n                bgcolor: '#3f51b5'\r\n              }}\r\n            >\r\n              GO TO VIEW APPOINTMENTS\r\n            </Button>\r\n          </Card>\r\n        </Grid>\r\n      </Grid>      <Paper sx={{ width: '100%', mb: 4, boxShadow: 2, borderRadius: 1, overflow: 'hidden' }}>\r\n        <Tabs\r\n          value={activeTab}\r\n          onChange={handleTabChange}\r\n          variant=\"fullWidth\"\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          aria-label=\"dashboard tabs\"\r\n          sx={{ bgcolor: '#f5f5f5' }}\r\n        >\r\n          <Tab \r\n            icon={<EventIcon />} \r\n            iconPosition=\"start\"\r\n            label={`UPCOMING EVENTS (${upcomingEvents.length || 0})`} \r\n            sx={{ \r\n              textTransform: 'uppercase',\r\n              fontWeight: 'medium',\r\n              fontSize: '0.75rem',\r\n              py: 2\r\n            }}\r\n          />\r\n          <Tab \r\n            icon={<PharmacyIcon />} \r\n            iconPosition=\"start\"\r\n            label={`MEDICATION REQUESTS (${medicationRequests.length || 0})`} \r\n            sx={{ \r\n              textTransform: 'uppercase',\r\n              fontWeight: 'medium',\r\n              fontSize: '0.75rem',\r\n              py: 2\r\n            }}\r\n          />\r\n          <Tab \r\n            icon={<ChildCareIcon />} \r\n            iconPosition=\"start\"\r\n            label=\"MY CHILDREN\" \r\n            sx={{ \r\n              textTransform: 'uppercase',\r\n              fontWeight: 'medium',\r\n              fontSize: '0.75rem',\r\n              py: 2\r\n            }}\r\n          />\r\n        </Tabs>\r\n\r\n        <TabPanel value={activeTab} index={0}>\r\n          {upcomingEvents.length > 0 ? (\r\n            <Grid container spacing={2}>\r\n              {upcomingEvents.map((event) => (\r\n                <Grid item xs={12} sm={6} key={event.id}>\r\n                  <Card>\r\n                    <CardContent>\r\n                      <Typography variant=\"h6\">{event.title}</Typography>\r\n                      <Typography color=\"textSecondary\">Date: {new Date(event.date || event.startDate).toLocaleDateString()}</Typography>\r\n                      <Typography color=\"textSecondary\">Location: {event.location || 'School'}</Typography>\r\n                    </CardContent>\r\n                  </Card>\r\n                </Grid>\r\n              ))}\r\n            </Grid>\r\n          ) : (\r\n            <Typography>No upcoming events to display.</Typography>\r\n          )}\r\n        </TabPanel>\r\n\r\n        <TabPanel value={activeTab} index={1}>\r\n          <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\r\n            <Typography variant=\"h6\">Medication Requests</Typography>\r\n            <Button \r\n              variant=\"outlined\" \r\n              color=\"primary\"\r\n              onClick={() => navigate('/parent/my-requests')}\r\n              startIcon={<ListAltIcon />}\r\n            >\r\n              View All Requests\r\n            </Button>\r\n          </Box>\r\n          \r\n          {medicationRequests.length > 0 ? (\r\n            <List>\r\n              {medicationRequests.map((request) => (                <ListItem key={request.id || request.requestId} divider>\r\n                  <ListItemAvatar>\r\n                    <Avatar sx={{ bgcolor: getStatusColor(request) }}>\r\n                      <PharmacyIcon />\r\n                    </Avatar>\r\n                  </ListItemAvatar>\r\n                  <ListItemText \r\n                    primary={\r\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                        <Typography variant=\"body1\" component=\"span\">\r\n                          {request.medicationName}\r\n                        </Typography>\r\n                        <Chip \r\n                          label={determineStatus(request)} \r\n                          color={getChipColor(request)} \r\n                          size=\"small\" \r\n                          sx={{ ml: 1 }}\r\n                        />\r\n                      </Box>\r\n                    }\r\n                    secondary={\r\n                      <>\r\n                        <Typography variant=\"body2\" component=\"span\">\r\n                          For: {request.studentName || request.student?.fullName || 'Unknown Child'}\r\n                          {request.studentCode && ` (${request.studentCode})`}\r\n                        </Typography>\r\n                        <br />\r\n                        <Typography variant=\"body2\" component=\"span\">\r\n                          Requested: {new Date(request.requestDate).toLocaleDateString()}\r\n                        </Typography>                        {(determineStatus(request) === 'APPROVED' || determineStatus(request) === 'ADMINISTERED') && request.approvedBy && (\r\n                          <>\r\n                            <br />\r\n                            <Typography variant=\"body2\" component=\"span\" color=\"success.main\">\r\n                              Approved by: {request.approvedBy?.fullName || 'School Nurse'}\r\n                            </Typography>\r\n                          </>\r\n                        )}\r\n                        {determineStatus(request) === 'ADMINISTERED' && request.administeredBy && (\r\n                          <>\r\n                            <br />\r\n                            <Typography variant=\"body2\" component=\"span\" color=\"info.main\">\r\n                              Administered by: {request.administeredBy?.fullName || 'School Nurse'} \r\n                              {request.administered_at && ` on ${new Date(request.administered_at).toLocaleDateString()}`}\r\n                            </Typography>\r\n                          </>\r\n                        )}\r\n                      </>\r\n                    }\r\n                  />\r\n                  <Box sx={{ display: 'flex', gap: 1 }}>\r\n                    <Button\r\n                      variant=\"outlined\"\r\n                      size=\"small\"\r\n                      color=\"primary\"\r\n                      startIcon={<ViewIcon />}\r\n                      onClick={() => navigate(`/parent/medication-request/${request.id || request.requestId}`)}\r\n                    >\r\n                      Details\r\n                    </Button>\r\n                    {(determineStatus(request) === 'PENDING' || determineStatus(request) === 'SUBMITTED') && (\r\n                      <Button\r\n                        variant=\"outlined\"\r\n                        size=\"small\"\r\n                        color=\"error\"\r\n                        startIcon={<CancelIcon />}\r\n                        onClick={() => handleCancelRequest(request.id || request.requestId)}\r\n                      >\r\n                        Cancel\r\n                      </Button>\r\n                    )}\r\n                  </Box>\r\n                </ListItem>\r\n              ))}\r\n            </List>\r\n          ) : (\r\n            <Typography>No medication requests to display.</Typography>\r\n          )}\r\n        </TabPanel>\r\n\r\n        <TabPanel value={activeTab} index={2}>\r\n          {dashboardData.children.length > 0 ? (\r\n            <Grid container spacing={2}>\r\n              {dashboardData.children.map((child) => (\r\n                <Grid item xs={12} sm={6} md={4} key={child.studentCode}>\r\n                  <Card>\r\n                    <CardContent>\r\n                      <Typography variant=\"h6\">{child.fullName}</Typography>\r\n                      <Typography variant=\"body2\" color=\"textSecondary\">Class: {child.clazz?.name || 'N/A'}</Typography>\r\n                      <Typography variant=\"body2\" color=\"textSecondary\">Student Code: {child.studentCode}</Typography>\r\n                      <Button \r\n                        variant=\"outlined\" \r\n                        color=\"primary\" \r\n                        onClick={() => handleViewChildDetails(child)}\r\n                        sx={{ mt: 2 }}\r\n                        fullWidth\r\n                      >\r\n                        View Details\r\n                      </Button>\r\n                    </CardContent>\r\n                  </Card>\r\n                </Grid>\r\n              ))}\r\n            </Grid>\r\n          ) : (\r\n            <Typography>No children found.</Typography>\r\n          )}        </TabPanel>\r\n      </Paper>{selectedChildForDialog && (\r\n        <Dialog open={childDetailsOpen} onClose={closeChildDetailsDialog} maxWidth=\"sm\" fullWidth>\r\n          <DialogTitle>\r\n            Child Details: {selectedChildForDialog.fullName}\r\n          </DialogTitle>\r\n          <DialogContent dividers>\r\n            <Grid container spacing={2}>\r\n              <Grid item>\r\n                <Avatar sx={{ width: 60, height: 60, bgcolor: theme.palette.primary.main }}>\r\n                  <PersonIcon sx={{ fontSize: 40 }} />\r\n                </Avatar>\r\n              </Grid>\r\n              <Grid item xs>\r\n                <Typography variant=\"h6\">{selectedChildForDialog.fullName}</Typography>\r\n                <Typography variant=\"body1\">Student Code: {selectedChildForDialog.studentCode}</Typography>\r\n                <Typography variant=\"body1\">Class: {selectedChildForDialog.clazz?.name || 'N/A'}</Typography>\r\n                <Typography variant=\"body1\">DOB: {selectedChildForDialog.dateOfBirth ? new Date(selectedChildForDialog.dateOfBirth).toLocaleDateString() : 'N/A'}</Typography>\r\n              </Grid>\r\n            </Grid>\r\n            <Divider sx={{ my: 2 }} />\r\n            <Typography variant=\"h6\" gutterBottom>Health Information</Typography>\r\n            <Typography variant=\"body2\">Allergies: {selectedChildForDialog.allergies || 'None reported'}</Typography>\r\n            <Typography variant=\"body2\">Medical Conditions: {selectedChildForDialog.conditions || 'None reported'}</Typography>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={closeChildDetailsDialog} color=\"primary\">\r\n              Close\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ParentDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}